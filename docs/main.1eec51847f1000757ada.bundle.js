(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{118:function(module,__webpack_exports__,__webpack_require__){"use strict";var prop_types__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1),prop_types__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_0__),_hoc__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(20),Bookmarks=Object(_hoc__WEBPACK_IMPORTED_MODULE_1__.a)("esri/widgets/Bookmarks");Bookmarks.propTypes={properties:prop_types__WEBPACK_IMPORTED_MODULE_0___default.a.object,position:prop_types__WEBPACK_IMPORTED_MODULE_0___default.a.oneOfType([prop_types__WEBPACK_IMPORTED_MODULE_0___default.a.string,prop_types__WEBPACK_IMPORTED_MODULE_0___default.a.object])},__webpack_exports__.a=Bookmarks},17:function(module,__webpack_exports__,__webpack_require__){"use strict";var _react_16_11_0_react=__webpack_require__(0),_prop_types_15_7_2_prop_types=__webpack_require__(1),_prop_types_15_7_2_prop_types_default=__webpack_require__.n(_prop_types_15_7_2_prop_types),_eventemitter3_4_0_0_eventemitter3=__webpack_require__(160),_eventemitter3_4_0_0_eventemitter3_default=__webpack_require__.n(_eventemitter3_4_0_0_eventemitter3),es5=__webpack_require__(14),utils_createHighlightGrpahic=function createHighlightGrpahic(graphic,_ref){var color=_ref.color,fillOpacity=_ref.fillOpacity,clone=(_ref.haloOpacity,graphic.clone());switch(function type(geometry){return geometry.type?geometry.type:geometry.paths?"polyline":geometry.rings?"polygon":geometry.points?"multipoint":"x"in geometry?"point":void 0}(graphic.geometry)){case"point":case"multipoint":case"polygon":color.a=fillOpacity,clone.symbol.color=color,clone.symbol.outline&&(clone.symbol.outline.color=color);break;case"polyline":clone.symbol.color=color}return clone},updateGraphic=function updateGraphic(layer,graphic,properties){graphic.set(properties),"feature"===layer.type&&layer.applyEdits({updateFeatures:[graphic]})},utils_createGraphic=function createGraphic(_ref3){var properties=_ref3.properties,json=_ref3.json;return Object(es5.loadModules)(["esri/Graphic"]).then((function(_ref4){var Graphic=_ref4.Graphic;if(properties)return new Graphic(properties);if(json)return Graphic.fromJSON(json);throw new Error("properties and json cannot to be empty at the same time")}))},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var BaseState=function(){function BaseState(stateMananger){_classCallCheck(this,BaseState),this.stateManager=stateMananger,this.key="base"}return _createClass(BaseState,[{key:"init",value:function init(){}},{key:"destroy",value:function destroy(){}},{key:"update",value:function update(){}},{key:"select",value:function select(){}},{key:"deselect",value:function deselect(){}},{key:"edit",value:function edit(){}},{key:"quitEdit",value:function quitEdit(){}}]),BaseState}(),Initializing=function(_BaseState){function Initializing(props){_classCallCheck(this,Initializing);var _this=_possibleConstructorReturn(this,(Initializing.__proto__||Object.getPrototypeOf(Initializing)).call(this,props));return _this.key="initializing",_this}return _inherits(Initializing,_BaseState),Initializing}(BaseState),state_Normal=function(_BaseState2){function Normal(props){_classCallCheck(this,Normal);var _this2=_possibleConstructorReturn(this,(Normal.__proto__||Object.getPrototypeOf(Normal)).call(this,props));return _this2.key="normal",_this2.init(),_this2}return _inherits(Normal,_BaseState2),_createClass(Normal,[{key:"update",value:function update(properties){var _stateManager=this.stateManager,layer=_stateManager.layer,graphic=_stateManager.graphic;updateGraphic(layer,graphic,properties)}},{key:"select",value:function select(){this.stateManager.changeState("selected")}},{key:"edit",value:function edit(){this.stateManager.changeState("editing")}}]),Normal}(BaseState),state_Selected=function(_BaseState3){function Selected(props){_classCallCheck(this,Selected);var _this3=_possibleConstructorReturn(this,(Selected.__proto__||Object.getPrototypeOf(Selected)).call(this,props));return _this3.key="selected",_this3.highlightHandler=null,_this3.symbolProperty=null,_this3.init(),_this3}return _inherits(Selected,_BaseState3),_createClass(Selected,[{key:"init",value:function init(){var _this4=this,_stateManager2=this.stateManager,view=_stateManager2.view,layer=_stateManager2.layer,graphic=_stateManager2.graphic;view.whenLayerView(layer).then((function(layerView){_this4.highlightHandler=function highlight(layerView){var targets=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],options=arguments[2],layer=layerView.layer,view=layerView.view,isGraphicsLayerView="graphics"===layer.type;if(!isGraphicsLayerView)return layerView.highlight(targets);var mode=options&&options.mode||"symbol",highlightOptions=view.highlightOptions,highlightGraphics=targets.map((function(t){return utils_createHighlightGrpahic(t,highlightOptions)}));if("symbol"===mode){var originSymbolMapping={};return targets.forEach((function(t,i){originSymbolMapping[i]=t.clone().symbol,t.symbol=highlightGraphics[i].symbol})),{remove:function remove(){targets.forEach((function(t,i){t.symbol=originSymbolMapping[i]}))}}}return targets.forEach((function(t){return t.visible=!1})),layer.addMany(highlightGraphics),{remove:function remove(){layer.removeMany(highlightGraphics),targets.forEach((function(t){return t.visible=!0}))}}}(layerView,[graphic])}))}},{key:"destroy",value:function destroy(){if(this.highlightHandler&&(this.highlightHandler.remove(),this.highlightHandler=null),this.symbolProperty){var _stateManager3=this.stateManager,layer=_stateManager3.layer,graphic=_stateManager3.graphic;updateGraphic(layer,graphic,{symbol:this.symbolProperty}),this.symbolProperty=null}}},{key:"update",value:function update(properties){var _stateManager4=this.stateManager,layer=_stateManager4.layer,graphic=_stateManager4.graphic;"symbol"in properties&&(this.symbolProperty=properties.symbol);var geometry=properties.geometry,attributes=properties.attributes;updateGraphic(layer,graphic,{geometry:geometry,attributes:attributes})}},{key:"deselect",value:function deselect(){this.stateManager.changeState("normal")}},{key:"edit",value:function edit(){this.stateManager.changeState("editing")}}]),Selected}(BaseState),state_Editing=function(_BaseState4){function Editing(props){_classCallCheck(this,Editing);var _this5=_possibleConstructorReturn(this,(Editing.__proto__||Object.getPrototypeOf(Editing)).call(this,props));return _this5.sketchEventHandler=function(e){var graphic=e.graphics[0];"active"===e.state&&e.toolEventInfo&&e.toolEventInfo.type.endsWith("-start")?_this5.editing=!0:e.toolEventInfo&&e.toolEventInfo.type.endsWith("-stop")&&(_this5.editing=!1),_this5.editing&&_this5.stateManager.emit("edit",{graphic:graphic,event:e})},_this5.key="editing",_this5.clonedGraphic=null,_this5.tempGraphicsLayer=null,_this5.symbolProperty=null,_this5.sketch=null,_this5.editing=!1,_this5.destroying=!1,_this5.selected=!1,_this5.init(),_this5}return _inherits(Editing,_BaseState4),_createClass(Editing,[{key:"init",value:function init(){var _this6=this;Object(es5.loadModules)(["esri/widgets/Sketch/SketchViewModel","esri/layers/GraphicsLayer"]).then((function(_ref){var SketchViewModel=_ref.SketchViewModel,GraphicsLayer=_ref.GraphicsLayer;if(!_this6.destroying){var _stateManager5=_this6.stateManager,view=_stateManager5.view,graphic=_stateManager5.graphic,layer=_stateManager5.layer,tempGraphicsLayer=new GraphicsLayer,clonedGraphic=graphic.clone();view.map.add(tempGraphicsLayer),tempGraphicsLayer.add(clonedGraphic),function hideGraphic(layer,graphic){if("graphics"===layer.type)graphic.visible=!1;else if("feature"===layer.type){var id=graphic.attributes[layer.objectIdField];layer.definitionExpression=layer.objectIdField+" <> "+id}}(layer,graphic);var sketch=new SketchViewModel({view:view,layer:tempGraphicsLayer,updateOnGraphicClick:!1,defaultUpdateOptions:{tool:"reshape"}});setTimeout((function(){return sketch.update([clonedGraphic])}),0),sketch.on(["update","undo","redo"],_this6.sketchEventHandler),_this6.tempGraphicsLayer=tempGraphicsLayer,_this6.clonedGraphic=clonedGraphic,_this6.sketch=sketch}}))}},{key:"destroy",value:function destroy(){var _stateManager6=this.stateManager,view=_stateManager6.view,graphic=_stateManager6.graphic,layer=_stateManager6.layer;this.destroying=!0,"feature"===layer.type&&(!function showGraphic(layer,graphic){"graphics"===layer.type?graphic.visible=!0:"feature"===layer.type&&(layer.definitionExpression=null)}(layer,graphic),updateGraphic(layer,graphic,{geometry:this.clonedGraphic.geometry})),this.symbolProperty&&updateGraphic(layer,graphic,{symbol:this.symbolProperty}),this.tempGraphicsLayer.remove(this.clonedGraphic),view.map.remove(this.tempGraphicsLayer),this.sketch.cancel(),this.sketch=null,this.tempGraphicsLayer=null,this.clonedGraphic=null,this.symbolProperty=null}},{key:"update",value:function update(properties){var _stateManager7=this.stateManager,layer=_stateManager7.layer,graphic=_stateManager7.graphic;"symbol"in properties&&(this.symbolProperty=properties.symbol);var geometry=properties.geometry,attributes=properties.attributes;updateGraphic(layer,graphic,{geometry:geometry,attributes:attributes}),this.editing||(this.sketch.cancel(),updateGraphic(this.tempGraphicsLayer,this.clonedGraphic,{geometry:geometry,attributes:attributes}),this.sketch.update([this.clonedGraphic]))}},{key:"select",value:function select(){this.selected=!0}},{key:"deselect",value:function deselect(){this.selected=!1}},{key:"quitEdit",value:function quitEdit(){this.stateManager.changeState(this.selected?"selected":"normal")}}]),Editing}(BaseState),state=function(_EventEmitter){function StateManager(_ref2){var view=_ref2.view,layer=_ref2.layer;_classCallCheck(this,StateManager);var _this7=_possibleConstructorReturn(this,(StateManager.__proto__||Object.getPrototypeOf(StateManager)).call(this));return _this7.view=view,_this7.layer=layer,_this7.graphic=null,_this7.destroying=!1,_this7.state=new BaseState,_this7}return _inherits(StateManager,_EventEmitter),_createClass(StateManager,[{key:"init",value:function init(_ref3){var _this8=this,properties=_ref3.properties,json=_ref3.json;this.changeState("initializing"),utils_createGraphic({properties:properties,json:json}).then((function(graphic){_this8.destroying||(_this8.graphic=graphic,function addGraphic(layer,graphic){"graphics"===layer.type?layer.add(graphic):"feature"===layer.type&&layer.applyEdits({addFeatures:[graphic]})}(_this8.layer,graphic),_this8.changeState("normal"))}))}},{key:"destroy",value:function destroy(){this.destroying=!0,this.state.destroy(),function removeGraphic(layer,graphic){"graphics"===layer.type?layer.remove(graphic):"feature"===layer.type&&layer.applyEdits({deleteFeatures:[graphic]})}(this.layer,this.graphic)}},{key:"changeState",value:function changeState(stateKey){this.state&&(this.prevState=this.state.key,this.state.destroy());var StateClass={initializing:Initializing,normal:state_Normal,selected:state_Selected,editing:state_Editing}[stateKey];console.log("changeState ======> "+this.state.key+" from to "+stateKey,this.graphic),this.state=new StateClass(this)}},{key:"update",value:function update(_ref4){var _this9=this,properties=_ref4.properties,json=_ref4.json;properties?this.state.update(properties):function json2Properties(json){return utils_createGraphic({json:json}).then((function(_ref2){return{attributes:_ref2.attributes,geometry:_ref2.geometry,symbol:_ref2.symbol}}))}(json).then((function(properties){_this9.state.update(properties)}))}},{key:"select",value:function select(){this.state.select()}},{key:"deselect",value:function deselect(){this.state.deselect()}},{key:"edit",value:function edit(){this.state.edit()}},{key:"quitEdit",value:function quitEdit(){this.state.quitEdit()}}]),StateManager}(_eventemitter3_4_0_0_eventemitter3_default.a),Graphic_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();var Graphic_Graphic=function(_Component){function Graphic(props){!function Graphic_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Graphic);var _this=function Graphic_possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(Graphic.__proto__||Object.getPrototypeOf(Graphic)).call(this,props));return _this.editHandler=function(_ref){var graphic=_ref.graphic,event=_ref.event,onEdit=_this.props.onEdit;onEdit&&onEdit({graphic:graphic,event:event,key:Graphic.key({properties:graphic})})},_this.stateManager=null,_this}return function Graphic_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(Graphic,_Component),Graphic_createClass(Graphic,[{key:"componentDidMount",value:function componentDidMount(){var _props=this.props,view=_props.view,layer=_props.layer,properties=_props.properties,json=_props.json;this.stateManager=new state({view:view,layer:layer}),this.stateManager.init({properties:properties,json:json}),this.stateManager.on("edit",this.editHandler)}},{key:"componentWillUnmount",value:function componentWillUnmount(){this.stateManager.destroy(),this.stateManager=null}},{key:"componentDidUpdate",value:function componentDidUpdate(prevProps){var _this2=this,_props2=this.props,properties=_props2.properties,json=_props2.json,selected=_props2.selected,selectable=_props2.selectable,editable=_props2.editable,editing=_props2.editing,needSync=function needSync(name){return!prevProps&&name in _this2.props||prevProps&&prevProps[name]!==_this2.props[name]};(needSync("json")||needSync("properties"))&&this.stateManager.update({properties:properties,json:json}),selectable&&(selected?this.stateManager.select():needSync("selected")&&!selected&&this.stateManager.deselect()),editable&&needSync("editing")&&(editing?this.stateManager.edit():this.stateManager.quitEdit())}},{key:"render",value:function render(){return null}}]),Graphic}(_react_16_11_0_react.Component);Graphic_Graphic.propTypes={view:_prop_types_15_7_2_prop_types_default.a.object.isRequired,layer:_prop_types_15_7_2_prop_types_default.a.object.isRequired,properties:_prop_types_15_7_2_prop_types_default.a.object,json:_prop_types_15_7_2_prop_types_default.a.object,hoverable:_prop_types_15_7_2_prop_types_default.a.bool,selectable:_prop_types_15_7_2_prop_types_default.a.bool,selected:_prop_types_15_7_2_prop_types_default.a.bool,editable:_prop_types_15_7_2_prop_types_default.a.bool,editing:_prop_types_15_7_2_prop_types_default.a.bool,onEdit:_prop_types_15_7_2_prop_types_default.a.func},Graphic_Graphic.defaultProps={hoverable:!0,selectable:!0,selected:!1,editable:!0,editing:!1,onEdit:null};Graphic_Graphic.keyAttribute="key";Graphic_Graphic.config=function config(_ref2){var keyAttribute=_ref2.keyAttribute;Graphic_Graphic.keyAttribute=keyAttribute},Graphic_Graphic.key=function key(graphic){return(graphic.attributes||{})[Graphic_Graphic.keyAttribute]},Graphic_Graphic.__docgenInfo={description:'usage:\r\n <GraphicsLayer>\r\n      <Graphic key="" json={} />\r\n      <Graphic key="" properties={} />\r\n    </GraphicsLayer>',methods:[{name:"editHandler",docblock:null,modifiers:[],params:[{name:"{ graphic, event }",type:null}],returns:null}],displayName:"Graphic",props:{hoverable:{defaultValue:{value:"true",computed:!1},type:{name:"bool"},required:!1,description:""},selectable:{defaultValue:{value:"true",computed:!1},type:{name:"bool"},required:!1,description:""},selected:{defaultValue:{value:"false",computed:!1},type:{name:"bool"},required:!1,description:""},editable:{defaultValue:{value:"true",computed:!1},type:{name:"bool"},required:!1,description:""},editing:{defaultValue:{value:"false",computed:!1},type:{name:"bool"},required:!1,description:""},onEdit:{defaultValue:{value:"null",computed:!1},type:{name:"func"},required:!1,description:""},view:{type:{name:"object"},required:!0,description:""},layer:{type:{name:"object"},required:!0,description:""},properties:{type:{name:"object"},required:!1,description:""},json:{type:{name:"object"},required:!1,description:""}}};__webpack_exports__.a=Graphic_Graphic;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src\\components\\graphic\\Graphic.js"]={name:"Graphic",docgenInfo:Graphic_Graphic.__docgenInfo,path:"src\\components\\graphic\\Graphic.js"})},20:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return widgetHoc}));var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),prop_types__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(1),prop_types__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_1__),esri_module_loader__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(14),_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}var widgetHoc=function widgetHoc(widgetModulePath){var WC=function(_Component){function WC(){var _ref,_temp,_this;!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,WC);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _temp=_this=_possibleConstructorReturn(this,(_ref=WC.__proto__||Object.getPrototypeOf(WC)).call.apply(_ref,[this].concat(args))),_this.widgetInstance=null,_possibleConstructorReturn(_this,_temp)}return function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(WC,_Component),_createClass(WC,[{key:"componentDidMount",value:function componentDidMount(){var _this2=this;Object(esri_module_loader__WEBPACK_IMPORTED_MODULE_2__.loadModules)([{name:"Widget",path:widgetModulePath}]).then((function(_ref2){var Widget=_ref2.Widget,_props=_this2.props,view=_props.view,_props$properties=_props.properties,properties=void 0===_props$properties?{}:_props$properties,onLoad=_props.onLoad;_this2.widgetInstance=new Widget(_extends({},properties,{view:view})),_this2.add(),onLoad&&onLoad(_this2.widgetInstance)}))}},{key:"componentWillUnmount",value:function componentWillUnmount(){this.widgetInstance&&this.remove()}},{key:"add",value:function add(){var _props2=this.props,view=_props2.view,position=_props2.position,add=_props2.add;add?add(this.widgetInstance,position):view.ui.add(this.widgetInstance,position)}},{key:"remove",value:function remove(){var _props3=this.props,view=_props3.view,remove=_props3.remove;remove?remove(this.widgetInstance):view.ui.remove(this.widgetInstance),this.widgetInstance=null}},{key:"render",value:function render(){return null}}]),WC}(react__WEBPACK_IMPORTED_MODULE_0__.Component);return WC.propTypes={view:prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.object,properties:prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.object,add:prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.func,remove:prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.func,onLoad:prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.func},WC}},263:function(module,exports,__webpack_require__){__webpack_require__(264),__webpack_require__(377),module.exports=__webpack_require__(378)},285:function(module,exports){},378:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),function(module){var _storybook_react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(262);Object(_storybook_react__WEBPACK_IMPORTED_MODULE_0__.configure)(__webpack_require__(561),module)}.call(this,__webpack_require__(379)(module))},46:function(module,__webpack_exports__,__webpack_require__){"use strict";var _react_16_11_0_react=__webpack_require__(0),_react_16_11_0_react_default=__webpack_require__.n(_react_16_11_0_react),MapContext=_react_16_11_0_react_default.a.createContext({map:null,view:null}),MapProvider_MapProvider=MapContext.Provider,esm=(MapContext.Consumer,__webpack_require__(11)),_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}var Map_Map=function(_Component){function Map(){var _ref,_temp,_this;!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Map);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _temp=_this=_possibleConstructorReturn(this,(_ref=Map.__proto__||Object.getPrototypeOf(Map)).call.apply(_ref,[this].concat(args))),_this.state={map:null,view:null},_this.onLoad=function(map,view){var onLoad=_this.props.onLoad;_this.setState({map:map,view:view},(function(){return onLoad&&onLoad(map,view)}))},_possibleConstructorReturn(_this,_temp)}return function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(Map,_Component),_createClass(Map,[{key:"render",value:function render(){var _props=this.props,props=(_props.onLoad,function _objectWithoutProperties(obj,keys){var target={};for(var i in obj)keys.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(obj,i)&&(target[i]=obj[i]);return target}(_props,["onLoad"]));return _react_16_11_0_react_default.a.createElement(MapProvider_MapProvider,{value:this.state},_react_16_11_0_react_default.a.createElement(esm.a,_extends({onLoad:this.onLoad},props)))}}]),Map}(_react_16_11_0_react.Component);Map_Map.__docgenInfo={description:"",methods:[{name:"onLoad",docblock:null,modifiers:[],params:[{name:"map",type:null},{name:"view",type:null}],returns:null}],displayName:"Map"};__webpack_exports__.a=Map_Map;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src\\components\\map\\Map.js"]={name:"Map",docgenInfo:Map_Map.__docgenInfo,path:"src\\components\\map\\Map.js"})},55:function(module,__webpack_exports__,__webpack_require__){"use strict";var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__),prop_types__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(1),prop_types__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_1__),esri_module_loader__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(14),_graphic_Graphic__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(17),_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();var GraphicsLayer=function(_Component){function GraphicsLayer(props){!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,GraphicsLayer);var _this=function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(GraphicsLayer.__proto__||Object.getPrototypeOf(GraphicsLayer)).call(this,props));return _this.setUncontrolledState=function(state){var needSync=!1,newState={};Object.keys(state).forEach((function(name){name in _this.props||(needSync=!0,newState[name]=state[name])})),needSync&&_this.setState(newState)},_this.clickHandler=function(){var hittedGraphics=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],event=arguments[1],onSelect=_this.props.onSelect,selectedKeys=hittedGraphics.map((function(g){return g.attributes.key}));_this.setUncontrolledState({selectedKeys:selectedKeys}),onSelect&&onSelect(selectedKeys,{graphics:hittedGraphics,event:event})},_this.pointerMoveHandler=function(){var hittedGraphics=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],event=arguments[1],_this$props=_this.props,view=_this$props.view,onHover=_this$props.onHover,hoverCursor=_this$props.hoverCursor,keys=hittedGraphics.map((function(g){return g.attributes.key}));hittedGraphics.length>0?(view.cursor=hoverCursor,onHover&&onHover(keys,{graphics:hittedGraphics,event:event})):view.cursor="auto"},_this.editHandler=function(event){var onEdit=_this.props.onEdit;onEdit&&onEdit(event)},_this.state={layer:null,selectedKeys:[],editingKeys:[]},_this.hoverKeys=[],_this}return function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(GraphicsLayer,_Component),_createClass(GraphicsLayer,[{key:"componentDidMount",value:function componentDidMount(){var _this2=this,_props=this.props,properties=_props.properties,map=_props.map,onLoad=_props.onLoad;(function createLayer(properties){return Object(esri_module_loader__WEBPACK_IMPORTED_MODULE_2__.loadModules)(["esri/layers/GraphicsLayer"]).then((function(_ref){return new(0,_ref.GraphicsLayer)(properties)}))})(properties).then((function(layer){_this2.setState({layer:layer}),map.add(layer),_this2.bindEvents(),onLoad&&onLoad(layer)}))}},{key:"componentWillUnmount",value:function componentWillUnmount(){this.unbindEvents(),this.props.map.remove(this.state.layer)}},{key:"shouldComponentUpdate",value:function shouldComponentUpdate(nextProps,nextState){return!!nextState.layer}},{key:"componentDidUpdate",value:function componentDidUpdate(prevProps){var _this3=this,properties=this.props.properties,layer=this.state.layer;(function needSync(name){return!prevProps&&name in _this3.props||prevProps&&prevProps[name]!==_this3.props[name]})("properties")&&layer.set(properties)}},{key:"bindEvents",value:function bindEvents(){var _this4=this,view=this.props.view,_hitted=function _hitted(results){return results.filter((function(r){return r.graphic.layer===_this4.state.layer})).map((function(r){return r.graphic}))};this.eventHandlers=[view.on("click",(function(e){view.hitTest(e).then((function(_ref2){var results=_ref2.results;_this4.clickHandler(_hitted(results),e)}))})),view.on("pointer-move",(function(e){view.hitTest(e).then((function(_ref3){var results=_ref3.results;_this4.pointerMoveHandler(_hitted(results),e)}))}))]}},{key:"unbindEvents",value:function unbindEvents(){this.eventHandlers.forEach((function(h){return h.remove()}))}},{key:"render",value:function render(){var _this5=this,_props2=this.props,view=_props2.view,_props2$children=_props2.children,children=void 0===_props2$children?[]:_props2$children,selectable=_props2.selectable,editable=_props2.editable,hoverable=_props2.hoverable,_state=this.state,layer=_state.layer,editingKeys=_state.editingKeys,selectedKeys=_state.selectedKeys;return layer?react__WEBPACK_IMPORTED_MODULE_0__.Children.map(children,(function(child){var graphicKey=_graphic_Graphic__WEBPACK_IMPORTED_MODULE_3__.a.key(child.props.properties||child.props.json);return react__WEBPACK_IMPORTED_MODULE_0___default.a.cloneElement(child,{view:view,layer:layer,selectable:selectable,selected:selectedKeys.includes(graphicKey),editable:editable,editing:editingKeys.includes(graphicKey),onEdit:_this5.editHandler,hoverable:hoverable})})):null}}],[{key:"getDerivedStateFromProps",value:function getDerivedStateFromProps(props,prevState){var prevProps=prevState.prevProps,newState={prevProps:props},needSync=function needSync(name){return!prevProps&&name in props||prevProps&&prevProps[name]!==props[name]};return props.selectable&&needSync("selectedKeys")&&(newState.selectedKeys=props.selectedKeys),props.editable&&needSync("editingKeys")&&(newState.editingKeys=props.editingKeys),newState}}]),GraphicsLayer}(react__WEBPACK_IMPORTED_MODULE_0__.Component);GraphicsLayer.propTypes={map:prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.object.isRequired,view:prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.object.isRequired,properties:prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.object,onLoad:prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.func,children:prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.oneOfType([prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.arrayOf(prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.element),prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.element]),selectable:prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.bool.isRequired,selectedKeys:prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.array,onSelect:prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.func,hoverable:prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.bool.isRequired,hoverCursor:prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.string,onHover:prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.func,editable:prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.bool,editingKeys:prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.array,onEdit:prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.func},GraphicsLayer.defaultProps={children:[],properties:null,selectable:!0,hoverable:!0,hoverCursor:"pointer",editable:!0},GraphicsLayer.__docgenInfo={description:"",methods:[{name:"bindEvents",docblock:null,modifiers:[],params:[],returns:null},{name:"unbindEvents",docblock:null,modifiers:[],params:[],returns:null},{name:"setUncontrolledState",docblock:"Only update the value which is not in props",modifiers:[],params:[{name:"state"}],returns:null,description:"Only update the value which is not in props"},{name:"clickHandler",docblock:null,modifiers:[],params:[{name:"hittedGraphics",type:null},{name:"event",type:null}],returns:null},{name:"pointerMoveHandler",docblock:null,modifiers:[],params:[{name:"hittedGraphics",type:null},{name:"event",type:null}],returns:null},{name:"editHandler",docblock:null,modifiers:[],params:[{name:"event",type:null}],returns:null}],displayName:"GraphicsLayer",props:{children:{defaultValue:{value:"[]",computed:!1},type:{name:"union",value:[{name:"arrayOf",value:{name:"element"}},{name:"element"}]},required:!1,description:""},properties:{defaultValue:{value:"null",computed:!1},type:{name:"object"},required:!1,description:""},selectable:{defaultValue:{value:"true",computed:!1},type:{name:"bool"},required:!1,description:""},hoverable:{defaultValue:{value:"true",computed:!1},type:{name:"bool"},required:!1,description:""},hoverCursor:{defaultValue:{value:"'pointer'",computed:!1},type:{name:"string"},required:!1,description:""},editable:{defaultValue:{value:"true",computed:!1},type:{name:"bool"},required:!1,description:""},map:{type:{name:"object"},required:!0,description:""},view:{type:{name:"object"},required:!0,description:""},onLoad:{type:{name:"func"},required:!1,description:""},selectedKeys:{type:{name:"array"},required:!1,description:""},onSelect:{type:{name:"func"},required:!1,description:""},onHover:{type:{name:"func"},required:!1,description:""},editingKeys:{type:{name:"array"},required:!1,description:""},onEdit:{type:{name:"func"},required:!1,description:""}}},__webpack_exports__.a=GraphicsLayer,"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src\\components\\layers\\graphics-layer\\GraphicsLayer.js"]={name:"GraphicsLayer",docgenInfo:GraphicsLayer.__docgenInfo,path:"src\\components\\layers\\graphics-layer\\GraphicsLayer.js"})},561:function(module,exports,__webpack_require__){var map={"./components/graphic/graphic.stories.js":568,"./components/layers/feature-layer/featureLayer.stories.js":567,"./components/widgets/widget.stories.js":569};function webpackContext(req){var id=webpackContextResolve(req);return __webpack_require__(id)}function webpackContextResolve(req){if(!__webpack_require__.o(map,req)){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}return map[req]}webpackContext.keys=function webpackContextKeys(){return Object.keys(map)},webpackContext.resolve=webpackContextResolve,module.exports=webpackContext,webpackContext.id=561},567:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _react_16_11_0_react=__webpack_require__(0),_react_16_11_0_react_default=__webpack_require__.n(_react_16_11_0_react),es5=__webpack_require__(14),Map=__webpack_require__(46),Graphic=__webpack_require__(17),_prop_types_15_7_2_prop_types=__webpack_require__(1),_prop_types_15_7_2_prop_types_default=__webpack_require__.n(_prop_types_15_7_2_prop_types),_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}var Widget_Widget=function(_Component){function Widget(){var _ref,_temp,_this;!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Widget);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _temp=_this=_possibleConstructorReturn(this,(_ref=Widget.__proto__||Object.getPrototypeOf(Widget)).call.apply(_ref,[this].concat(args))),_this.domNode=null,_possibleConstructorReturn(_this,_temp)}return function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(Widget,_Component),_createClass(Widget,[{key:"componentDidMount",value:function componentDidMount(){this.add()}},{key:"componentWillUnmount",value:function componentWillUnmount(){this.remove()}},{key:"add",value:function add(){var _props=this.props,view=_props.view,position=_props.position;view.ui.add(this.domNode,position)}},{key:"remove",value:function remove(){this.props.view.ui.remove(this.domNode),this.domNode=null}},{key:"render",value:function render(){var _this2=this;return _react_16_11_0_react_default.a.createElement("div",{ref:function ref(d){return _this2.domNode=d}},this.props.children)}}]),Widget}(_react_16_11_0_react.Component);Widget_Widget.propTypes={children:_prop_types_15_7_2_prop_types_default.a.node,position:_prop_types_15_7_2_prop_types_default.a.oneOfType([_prop_types_15_7_2_prop_types_default.a.string,_prop_types_15_7_2_prop_types_default.a.object])},Widget_Widget.__docgenInfo={description:"",methods:[{name:"add",docblock:null,modifiers:[],params:[],returns:null},{name:"remove",docblock:null,modifiers:[],params:[],returns:null}],displayName:"Widget",props:{children:{type:{name:"node"},required:!1,description:""},position:{type:{name:"union",value:[{name:"string"},{name:"object"}]},required:!1,description:""}}};var widget_Widget=Widget_Widget;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src\\components\\widgets\\widget\\Widget.js"]={name:"Widget",docgenInfo:Widget_Widget.__docgenInfo,path:"src\\components\\widgets\\widget\\Widget.js"});var hoc=__webpack_require__(20),Search=Object(hoc.a)("esri/widgets/Search");Search.propTypes={properties:_prop_types_15_7_2_prop_types_default.a.object,position:_prop_types_15_7_2_prop_types_default.a.oneOfType([_prop_types_15_7_2_prop_types_default.a.string,_prop_types_15_7_2_prop_types_default.a.object])};var search_Search=Search,Bookmarks=__webpack_require__(118),Expand=__webpack_require__(63),Legend=Object(hoc.a)("esri/widgets/Legend");Legend.propTypes={properties:_prop_types_15_7_2_prop_types_default.a.object,position:_prop_types_15_7_2_prop_types_default.a.oneOfType([_prop_types_15_7_2_prop_types_default.a.string,_prop_types_15_7_2_prop_types_default.a.object])};var legend_Legend=Legend,GraphicsLayer=__webpack_require__(55),FeatureLayer_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();var FeatureLayer_FeatureLayer=function(_Component){function FeatureLayer(props){!function FeatureLayer_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,FeatureLayer);var _this=function FeatureLayer_possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(FeatureLayer.__proto__||Object.getPrototypeOf(FeatureLayer)).call(this,props));return _this.setUncontrolledState=function(state){var needSync=!1,newState={};Object.keys(state).forEach((function(name){name in _this.props||(needSync=!0,newState[name]=state[name])})),needSync&&_this.setState(newState)},_this.clickHandler=function(){var hittedGraphics=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],event=arguments[1],onSelect=_this.props.onSelect,selectedKeys=hittedGraphics.map((function(g){return g.attributes.key}));_this.setUncontrolledState({selectedKeys:selectedKeys}),onSelect&&onSelect(selectedKeys,{graphics:hittedGraphics,event:event})},_this.pointerMoveHandler=function(){var hittedGraphics=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],event=arguments[1],_this$props=_this.props,view=_this$props.view,onHover=_this$props.onHover,hoverCursor=_this$props.hoverCursor,keys=hittedGraphics.map((function(g){return g.attributes.key}));hittedGraphics.length>0?(view.cursor=hoverCursor,onHover&&onHover(keys,{graphics:hittedGraphics,event:event})):view.cursor="auto"},_this.editHandler=function(event){var onEdit=_this.props.onEdit;onEdit&&onEdit(event)},_this.state={layer:null,selectedKeys:[],editingKeys:[]},_this}return function FeatureLayer_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(FeatureLayer,_Component),FeatureLayer_createClass(FeatureLayer,[{key:"componentDidMount",value:function componentDidMount(){var _this2=this;Object(es5.loadModules)(["FeatureLayer"]).then((function(_ref){var FeatureLayer=_ref.FeatureLayer,_props=_this2.props,properties=_props.properties,onLoad=_props.onLoad,layer=new FeatureLayer(properties);_this2.addLayer(layer),_this2.setState({layer:layer}),_this2.bindEvents(),layer.load().then((function(_){return onLoad&&onLoad(layer)}))}))}},{key:"componentWillUnmount",value:function componentWillUnmount(){this.unbindEvents(),this.removeLayer(this.state.layer)}},{key:"shouldComponentUpdate",value:function shouldComponentUpdate(nextProps,nextState){return!!nextState.layer}},{key:"componentDidUpdate",value:function componentDidUpdate(prevProps){var _this3=this;this.props.properties,this.state.layer;!function needSync(name){!prevProps&&name in _this3.props||prevProps&&(prevProps[name],_this3.props[name])}("properties")}},{key:"bindEvents",value:function bindEvents(){var _this4=this,view=this.props.view,_hitted=function _hitted(results){return results.filter((function(r){return r.graphic.layer===_this4.state.layer})).map((function(r){return r.graphic}))};this.eventHandlers=[view.on("click",(function(e){view.hitTest(e).then((function(_ref2){var results=_ref2.results;_this4.clickHandler(_hitted(results),e)}))})),view.on("pointer-move",(function(e){view.hitTest(e).then((function(_ref3){var results=_ref3.results;_this4.pointerMoveHandler(_hitted(results),e)}))}))]}},{key:"unbindEvents",value:function unbindEvents(){this.eventHandlers.forEach((function(h){return h.remove()}))}},{key:"addLayer",value:function addLayer(layer){var _props2=this.props,map=_props2.map,parentLayer=_props2.parentLayer;parentLayer?(console.log("FeatureLayer parentLayer.add(layer)"),parentLayer.add(layer)):(console.log("FeatureLayer map.add(layer)"),map.add(layer))}},{key:"removeLayer",value:function removeLayer(layer){var _props3=this.props,map=_props3.map,parentLayer=_props3.parentLayer;parentLayer?parentLayer.remove(layer):map.remove(layer)}},{key:"render",value:function render(){var _this5=this,_props4=this.props,view=_props4.view,_props4$children=_props4.children,children=void 0===_props4$children?[]:_props4$children,selectable=_props4.selectable,editable=_props4.editable,hoverable=_props4.hoverable,_state=this.state,layer=_state.layer,editingKeys=_state.editingKeys,selectedKeys=_state.selectedKeys;return layer?_react_16_11_0_react.Children.map(children,(function(child){var graphicKey=Graphic.a.key(child.props.properties||child.props.json);return _react_16_11_0_react_default.a.cloneElement(child,{view:view,layer:layer,selectable:selectable,selected:selectedKeys.includes(graphicKey),editable:editable,editing:editingKeys.includes(graphicKey),onEdit:_this5.editHandler,hoverable:hoverable})})):null}}],[{key:"getDerivedStateFromProps",value:function getDerivedStateFromProps(props,prevState){var prevProps=prevState.prevProps,newState={prevProps:props},needSync=function needSync(name){return!prevProps&&name in props||prevProps&&prevProps[name]!==props[name]};return props.selectable&&needSync("selectedKeys")&&(newState.selectedKeys=props.selectedKeys),props.editable&&needSync("editingKeys")&&(newState.editingKeys=props.editingKeys),newState}}]),FeatureLayer}(_react_16_11_0_react.Component);FeatureLayer_FeatureLayer.propTypes={map:_prop_types_15_7_2_prop_types_default.a.object.isRequired,view:_prop_types_15_7_2_prop_types_default.a.object.isRequired,parentLayer:_prop_types_15_7_2_prop_types_default.a.object,properties:_prop_types_15_7_2_prop_types_default.a.object,onLoad:_prop_types_15_7_2_prop_types_default.a.func,children:_prop_types_15_7_2_prop_types_default.a.oneOfType([_prop_types_15_7_2_prop_types_default.a.arrayOf(_prop_types_15_7_2_prop_types_default.a.element),_prop_types_15_7_2_prop_types_default.a.element]),selectable:_prop_types_15_7_2_prop_types_default.a.bool.isRequired,selectedKeys:_prop_types_15_7_2_prop_types_default.a.array,onSelect:_prop_types_15_7_2_prop_types_default.a.func,hoverable:_prop_types_15_7_2_prop_types_default.a.bool.isRequired,hoverCursor:_prop_types_15_7_2_prop_types_default.a.string,onHover:_prop_types_15_7_2_prop_types_default.a.func,editable:_prop_types_15_7_2_prop_types_default.a.bool,editingKeys:_prop_types_15_7_2_prop_types_default.a.array,onEdit:_prop_types_15_7_2_prop_types_default.a.func},FeatureLayer_FeatureLayer.defaultProps={children:[],properties:null,selectable:!0,hoverable:!0,hoverCursor:"pointer",editable:!0},FeatureLayer_FeatureLayer.__docgenInfo={description:"usage:\r\n <FeatureLayer featureLayerProperties={}>\r\n   <Graphic />\r\n   <Graphic />\r\n </FeatureLayer>",methods:[{name:"bindEvents",docblock:null,modifiers:[],params:[],returns:null},{name:"unbindEvents",docblock:null,modifiers:[],params:[],returns:null},{name:"setUncontrolledState",docblock:"Only update the value which is not in props",modifiers:[],params:[{name:"state"}],returns:null,description:"Only update the value which is not in props"},{name:"addLayer",docblock:null,modifiers:[],params:[{name:"layer",type:null}],returns:null},{name:"removeLayer",docblock:null,modifiers:[],params:[{name:"layer",type:null}],returns:null},{name:"clickHandler",docblock:null,modifiers:[],params:[{name:"hittedGraphics",type:null},{name:"event",type:null}],returns:null},{name:"pointerMoveHandler",docblock:null,modifiers:[],params:[{name:"hittedGraphics",type:null},{name:"event",type:null}],returns:null},{name:"editHandler",docblock:null,modifiers:[],params:[{name:"event",type:null}],returns:null}],displayName:"FeatureLayer",props:{children:{defaultValue:{value:"[]",computed:!1},type:{name:"union",value:[{name:"arrayOf",value:{name:"element"}},{name:"element"}]},required:!1,description:""},properties:{defaultValue:{value:"null",computed:!1},type:{name:"object"},required:!1,description:""},selectable:{defaultValue:{value:"true",computed:!1},type:{name:"bool"},required:!1,description:""},hoverable:{defaultValue:{value:"true",computed:!1},type:{name:"bool"},required:!1,description:""},hoverCursor:{defaultValue:{value:"'pointer'",computed:!1},type:{name:"string"},required:!1,description:""},editable:{defaultValue:{value:"true",computed:!1},type:{name:"bool"},required:!1,description:""},map:{type:{name:"object"},required:!0,description:""},view:{type:{name:"object"},required:!0,description:""},parentLayer:{type:{name:"object"},required:!1,description:""},onLoad:{type:{name:"func"},required:!1,description:""},selectedKeys:{type:{name:"array"},required:!1,description:""},onSelect:{type:{name:"func"},required:!1,description:""},onHover:{type:{name:"func"},required:!1,description:""},editingKeys:{type:{name:"array"},required:!1,description:""},onEdit:{type:{name:"func"},required:!1,description:""}}};var feature_layer_FeatureLayer=FeatureLayer_FeatureLayer;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src\\components\\layers\\feature-layer\\FeatureLayer.js"]={name:"FeatureLayer",docgenInfo:FeatureLayer_FeatureLayer.__docgenInfo,path:"src\\components\\layers\\feature-layer\\FeatureLayer.js"});var DataLoader_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();function DataLoader_possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}var DataLoader=function(_Component){function DataLoader(){var _ref,_temp,_this;!function DataLoader_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,DataLoader);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _temp=_this=DataLoader_possibleConstructorReturn(this,(_ref=DataLoader.__proto__||Object.getPrototypeOf(DataLoader)).call.apply(_ref,[this].concat(args))),_this.state={data:null},DataLoader_possibleConstructorReturn(_this,_temp)}return function DataLoader_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(DataLoader,_Component),DataLoader_createClass(DataLoader,[{key:"componentDidMount",value:function componentDidMount(){var _this2=this;this.props.load().then((function(data){console.log("DataLoader",data),_this2.setState({data:data})}))}},{key:"render",value:function render(){var data=this.state.data;return data?this.props.children(data):null}}]),DataLoader}(_react_16_11_0_react.Component);DataLoader.__docgenInfo={description:"",methods:[],displayName:"DataLoader"};var components_DataLoader=DataLoader;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES[".storybook\\components\\DataLoader.js"]={name:"DataLoader",docgenInfo:DataLoader.__docgenInfo,path:".storybook\\components\\DataLoader.js"});var exif=__webpack_require__(64),exif_default=__webpack_require__.n(exif),_slicedToArray=function(arr,i){if(Array.isArray(arr))return arr;if(Symbol.iterator in Object(arr))return function sliceIterator(arr,i){var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{!_n&&_i.return&&_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")},fetchImageAsFeatures=function fetchImageAsFeatures(){for(var tasks=[],i=1;i<18;i++)tasks.push(exifToGraphic("https://arcgis.github.io/arcgis-samples-javascript/sample-data/featurelayer-collection/photo-"+i+".jpg",i));return Promise.all(tasks)};function exifToGraphic(url,id){var dmsDD=function dmsDD(_ref,direction){var _ref2=_slicedToArray(_ref,3),dd=_ref2[0]+_ref2[1]/60+_ref2[2]/3600;return"S"!==direction&&"W"!==direction||(dd*=-1),dd};return new Promise((function(resolve,reject){var image=document.createElement("img");image.src=url,image.onload=function(){image.load=image.onerror=null,exif_default.a.getData(image,(function(){var latitude=exif_default.a.getTag(this,"GPSLatitude"),latitudeDirection=exif_default.a.getTag(this,"GPSLatitudeRef"),longitude=exif_default.a.getTag(this,"GPSLongitude"),longitudeDirection=exif_default.a.getTag(this,"GPSLongitudeRef");latitude&&longitude?resolve({geometry:{x:dmsDD(longitude,longitudeDirection),y:dmsDD(latitude,latitudeDirection),spatialReference:{wkid:4326}},attributes:{url:url,OBJECTID:id}}):reject(new Error("Photo doesn't contain GPS information: ",this.src))}))},image.onerror=function(){image.load=image.onerror=null,reject(new Error("Error while loading the image"))}}))}var esm=__webpack_require__(11);__webpack_require__.d(__webpack_exports__,"introFeatureLayer",(function(){return featureLayer_stories_introFeatureLayer})),__webpack_require__.d(__webpack_exports__,"createAFeatureLayerWithClientSideGraphics",(function(){return featureLayer_stories_createAFeatureLayerWithClientSideGraphics})),__webpack_require__.d(__webpack_exports__,"highlightPointFeatures",(function(){return featureLayer_stories_highlightPointFeatures})),__webpack_require__.d(__webpack_exports__,"labelFeaturesUsingArcadeExpressions",(function(){return featureLayer_stories_labelFeaturesUsingArcadeExpressions})),__webpack_require__.d(__webpack_exports__,"addLabelsToAFeatureLayer",(function(){return featureLayer_stories_addLabelsToAFeatureLayer})),__webpack_require__.d(__webpack_exports__,"multilineLabels",(function(){return featureLayer_stories_multilineLabels})),__webpack_require__.d(__webpack_exports__,"addMultipleLabelClassesToALayer",(function(){return featureLayer_stories_addMultipleLabelClassesToALayer})),__webpack_require__.d(__webpack_exports__,"filterFeaturesByAttributes",(function(){return featureLayer_stories_filterFeaturesByAttributes})),__webpack_require__.d(__webpack_exports__,"basicQuerying",(function(){return featureLayer_stories_basicQuerying})),__webpack_require__.d(__webpack_exports__,"createdFromAShapefile",(function(){return featureLayer_stories_createdFromAShapefile}));var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},featureLayer_stories_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();function featureLayer_stories_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function featureLayer_stories_possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function featureLayer_stories_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}__webpack_exports__.default={title:"FeatureLayer"};var featureLayer_stories_introFeatureLayer=function introFeatureLayer(){return _react_16_11_0_react_default.a.createElement("div",{style:{width:"100vw",height:"100vh"}},_react_16_11_0_react_default.a.createElement(Map.a,{mapProperties:{basemap:"hybrid"},viewProperties:{extent:{xmin:-9177811,ymin:4247e3,xmax:-9176791,ymax:4247784,spatialReference:102100}}},_react_16_11_0_react_default.a.createElement(feature_layer_FeatureLayer,{properties:{url:"https://services.arcgis.com/V6ZHFr6zdgNZuVG0/arcgis/rest/services/Landscape_Trees/FeatureServer/0"}})))},featureLayer_stories_createAFeatureLayerWithClientSideGraphics=function createAFeatureLayerWithClientSideGraphics(){Graphic.a.config({keyAttribute:"OBJECTID"});var featureLayerProperties={source:[],geometryType:"point",objectIdField:"OBJECTID",fields:[{name:"OBJECTID",type:"oid"},{name:"url",type:"string"}],popupTemplate:{content:"<img src='{url}'>"},renderer:{type:"simple",symbol:{type:"text",color:"#7A003C",text:"",font:{size:20,family:"CalciteWebCoreIcons"}}}};return _react_16_11_0_react_default.a.createElement(components_DataLoader,{load:fetchImageAsFeatures},(function(features){return _react_16_11_0_react_default.a.createElement("div",{style:{width:"100vw",height:"100vh"}},_react_16_11_0_react_default.a.createElement(Map.a,{mapProperties:{basemap:"dark-gray"},viewProperties:{center:[-41.647,36.41],zoom:3}},_react_16_11_0_react_default.a.createElement(feature_layer_FeatureLayer,{properties:featureLayerProperties},features.map((function(json){return _react_16_11_0_react_default.a.createElement(Graphic.a,{json:json})})))))}))},featureLayer_stories_highlightPointFeatures=function highlightPointFeatures(){var map=void 0,view=void 0,highlightSelect=void 0,btnStyle={width:"auto",display:"table-cell",margin:"4px",backgroundColor:"white",color:"#0079c1"};return _react_16_11_0_react_default.a.createElement("div",{style:{width:"100vw",height:"100vh"}},_react_16_11_0_react_default.a.createElement(esm.d,{id:"475a7161ed194460b5b52654e29581a2",viewProperties:{highlightOptions:{color:[255,241,58],fillOpacity:.4},environment:{atmosphereEnabled:!0,atmosphere:{quality:"high"}}},onLoad:function onLoad(m,v){map=m,view=v}}),_react_16_11_0_react_default.a.createElement("div",{className:"esri-widget",style:{position:"absolute",bottom:"40px",width:"100%",textAlign:"center",backgroundColor:"transparent",color:"white"}},_react_16_11_0_react_default.a.createElement("h3",null,"Subway stations"),["Valmy","St-Jean Vieux Lyon","Charpennes","Sans souci","Hôtel de Ville","Garibaldi"].map((function(s){return _react_16_11_0_react_default.a.createElement("button",{key:s,className:"esri-button",style:btnStyle,onClick:function onClick(_){return function _onClick(station){var stationLayer=map.layers.getItemAt(1);view.whenLayerView(stationLayer).then((function(layerView){var queryStations=stationLayer.createQuery();queryStations.where="nom='"+station+"'",stationLayer.queryFeatures(queryStations).then((function(result){highlightSelect&&highlightSelect.remove();var feature=result.features[0];highlightSelect=layerView.highlight(feature.attributes.OBJECTID),view.goTo({target:feature.geometry,tilt:70},{duration:2e3,easing:"in-out-expo"})}))}))}(s)}},s)}))))},featureLayer_stories_labelFeaturesUsingArcadeExpressions=function labelFeaturesUsingArcadeExpressions(){var featureLayerProperties={url:"https://services.arcgis.com/V6ZHFr6zdgNZuVG0/arcgis/rest/services/weather_stations_010417/FeatureServer/0",elevationInfo:{mode:"relative-to-ground",offset:1e3},renderer:{type:"simple",symbol:{type:"point-3d",symbolLayers:[{type:"object",material:{color:"#a38a8a"},resource:{primitive:"tetrahedron"},width:1e4,depth:2e4,height:1e3}]},visualVariables:[{type:"rotation",valueExpression:"$feature.WIND_DIRECT - 180",axis:"heading"}]},labelingInfo:[{min:0,max:67.5,color:"#4c82c4"},{min:67.5,max:157.5,color:"#6c4cc4"},{min:157.5,max:247.5,color:"#ae4cc4"},{min:247.5,max:337.5,color:"#c44c88"},{min:337.5,max:360,color:"#4c82c4"}].map((function(windClass){return{labelExpressionInfo:{expression:'\n    var DEG = $feature.WIND_DIRECT;\n    var SPEED = $feature.WIND_SPEED;\n    var DIR = When( SPEED == 0, "",\n      (DEG < 22.5 && DEG >= 0) || DEG > 337.5, "N",\n      DEG >= 22.5 && DEG < 67.5, "NE",\n      DEG >= 67.5 && DEG < 112.5, "E",\n      DEG >= 112.5 && DEG < 157.5, "SE",\n      DEG >= 157.5 && DEG < 202.5, "S",\n      DEG >= 202.5 && DEG < 247.5, "SW",\n      DEG >= 247.5 && DEG < 292.5, "W",\n      DEG >= 292.5 && DEG < 337.5, "NW", "" );\n    return SPEED + " mph " + DIR;\n  '},where:"WIND_DIRECT > "+windClass.min+" AND WIND_DIRECT <= "+windClass.max,labelPlacement:"above-center",symbol:{type:"label-3d",symbolLayers:[{type:"text",material:{color:"white"},halo:{color:windClass.color,size:1},size:12}]}}})),opacity:1};return _react_16_11_0_react_default.a.createElement("div",{style:{width:"100vw",height:"100vh"}},_react_16_11_0_react_default.a.createElement(esm.b,{mapProperties:{basemap:"topo"},viewProperties:{camera:{position:{x:-10930027,y:5458284,z:126663,spatialReference:{wkid:102100}},heading:63,tilt:73},constraints:{altitude:{min:1e5}}}},_react_16_11_0_react_default.a.createElement(feature_layer_FeatureLayer,{properties:featureLayerProperties})))},featureLayer_stories_addLabelsToAFeatureLayer=function addLabelsToAFeatureLayer(){return _react_16_11_0_react_default.a.createElement("div",{style:{width:"100vw",height:"100vh"}},_react_16_11_0_react_default.a.createElement(esm.c,{id:"372b7caa8fe340b0a6300df93ef18a7e",mapProperties:{},viewProperties:{center:[-116.925,34.2501],zoom:14}},_react_16_11_0_react_default.a.createElement(feature_layer_FeatureLayer,{properties:{portalItem:{id:"6012738cd1c74582a5f98ea30ae9876f"},labelingInfo:[{symbol:{type:"text",color:"green",haloColor:"black",font:{family:"Playfair Display",size:12,weight:"bold"}},labelPlacement:"above-center",labelExpressionInfo:{expression:"$feature.MARKER_ACTIVITY"}}],renderer:{type:"simple",symbol:{type:"simple-marker",color:"rgba(0,100,0,0.6)",size:3,outline:{color:[0,0,0,.1],width:.5}}}}}),_react_16_11_0_react_default.a.createElement(search_Search,{position:"top-right"})))},featureLayer_stories_multilineLabels=function multilineLabels(){var featureLayerProperties={url:"https://services.arcgis.com/V6ZHFr6zdgNZuVG0/arcgis/rest/services/weather_stations_010417/FeatureServer/0",renderer:{type:"simple",symbol:{type:"simple-marker",color:[75,75,75,.7],size:4,outline:null}},labelingInfo:[{labelExpressionInfo:{expression:"\n      var DEG = $feature.WIND_DIRECT;\n      var SPEED = $feature.WIND_SPEED;\n      var DIR = When( SPEED == 0, null,\n        (DEG < 22.5 && DEG >= 0) || DEG > 337.5, 'N',\n        DEG >= 22.5 && DEG < 67.5, 'NE',\n        DEG >= 67.5 && DEG < 112.5, 'E',\n        DEG >= 112.5 && DEG < 157.5, 'SE',\n        DEG >= 157.5 && DEG < 202.5, 'S',\n        DEG >= 202.5 && DEG < 247.5, 'SW',\n        DEG >= 247.5 && DEG < 292.5, 'W',\n        DEG >= 292.5 && DEG < 337.5, 'NW', null );\n      var WIND = SPEED + ' mph ' + DIR;\n      var TEMP = Round($feature.TEMP) + '° F';\n      var RH = $feature.R_HUMIDITY + '% RH';\n      var NAME = $feature.STATION_NAME;\n      var labels = [ NAME, TEMP, WIND, RH ];\n      return Concatenate(labels, TextFormatting.NewLine);\n    "},labelPlacement:"center-right",minScale:25e7,symbol:{type:"text",font:{size:9,family:"Noto Sans"},horizontalAlignment:"left",color:"#2b2b2b"}}]};return _react_16_11_0_react_default.a.createElement("div",{style:{width:"100vw",height:"100vh"}},_react_16_11_0_react_default.a.createElement(esm.c,{id:"372b7caa8fe340b0a6300df93ef18a7e",viewProperties:{center:[-117.842,33.799],zoom:10}},_react_16_11_0_react_default.a.createElement(feature_layer_FeatureLayer,{properties:featureLayerProperties})))},featureLayer_stories_addMultipleLabelClassesToALayer=function addMultipleLabelClassesToALayer(){var createTextSymbol=function createTextSymbol(color){return{type:"text",font:{size:12,weight:"bold"},color:"white",haloColor:color,haloSize:1}},nameClass={labelPlacement:"below-right",labelExpressionInfo:{expression:"$feature.STATION_NAME"},minScale:25e5};nameClass.symbol=createTextSymbol("black");var humidityClass={labelExpressionInfo:{expression:"$feature.R_HUMIDITY + '% RH'"},labelPlacement:"below-left",minScale:25e5};humidityClass.symbol=createTextSymbol("#c17c47");var windClass={labelExpressionInfo:{expression:'var DEG = $feature.WIND_DIRECT;\n      var SPEED = $feature.WIND_SPEED;\n      var DIR = When( SPEED == 0, "",\n        (DEG < 22.5 && DEG >= 0) || DEG > 337.5, "N",\n        DEG >= 22.5 && DEG < 67.5, "NE",\n        DEG >= 67.5 && DEG < 112.5, "E",\n        DEG >= 112.5 && DEG < 157.5, "SE",\n        DEG >= 157.5 && DEG < 202.5, "S",\n        DEG >= 202.5 && DEG < 247.5, "SW",\n        DEG >= 247.5 && DEG < 292.5, "W",\n        DEG >= 292.5 && DEG < 337.5, "NW", "" );\n      return SPEED + " mph " + DIR;'},labelPlacement:"above-right",minScale:25e5};windClass.symbol=createTextSymbol("#3ba53f");var highTempClass={labelExpressionInfo:{expression:"Round($feature.TEMP) + '° F';"},labelPlacement:"above-left",where:"TEMP > 32"};highTempClass.symbol=createTextSymbol("#f47742");var lowTempClass={labelExpressionInfo:{expression:"Round($feature.TEMP) + '° F';"},labelPlacement:"above-left",where:"TEMP <= 32"};lowTempClass.symbol=createTextSymbol("#4792c1");var featureLayerProperties={url:"https://services.arcgis.com/V6ZHFr6zdgNZuVG0/arcgis/rest/services/weather_stations_010417/FeatureServer/0",renderer:{type:"simple",symbol:{type:"simple-marker",color:[255,255,255,.6],size:4,outline:{color:[0,0,0,.4],width:.5}}},labelingInfo:[nameClass,humidityClass,lowTempClass,highTempClass,windClass]};return _react_16_11_0_react_default.a.createElement("div",{style:{width:"100vw",height:"100vh"}},_react_16_11_0_react_default.a.createElement(esm.c,{id:"f0e331d7986041ba8267298f579b3afe",viewProperties:{center:[-117.842,33.799],zoom:10}},_react_16_11_0_react_default.a.createElement(feature_layer_FeatureLayer,{properties:featureLayerProperties}),_react_16_11_0_react_default.a.createElement(Bookmarks.a,{position:"top-right"})))},featureLayer_stories_filterFeaturesByAttributes=function filterFeaturesByAttributes(){var view=void 0,layer=void 0;return _react_16_11_0_react_default.a.createElement("div",{style:{width:"100vw",height:"100vh"}},_react_16_11_0_react_default.a.createElement(Map.a,{mapProperties:{basemap:"gray-vector"},viewProperties:{center:[-98,40],zoom:4},onLoad:function onLoad(m,v){m,view=v}},_react_16_11_0_react_default.a.createElement(feature_layer_FeatureLayer,{properties:{portalItem:{id:"f9e348953b3848ec8b69964d5bceae02"},outFields:["SEASON"]},onLoad:function onLoad(fl){return layer=fl}}),_react_16_11_0_react_default.a.createElement(widget_Widget,{position:"top-right"},_react_16_11_0_react_default.a.createElement("div",{className:"esri-widget",style:{padding:"10px"}},_react_16_11_0_react_default.a.createElement("div",{style:{fontSize:"20pt",fontWeight:60,paddingBottom:"10px"}},"Flash Floods by Season"),_react_16_11_0_react_default.a.createElement("div",null,"Flash Flood Warnings (2002 - 2012)"))),_react_16_11_0_react_default.a.createElement(Expand.a,{properties:{expandIconClass:"esri-icon-filter",group:"top-left"},position:"top-left",className:"esri-widget",onExpand:function onExpand(expanded){view.whenLayerView(layer).then((function(floodLayerView){expanded||(floodLayerView.filter=null)}))}},_react_16_11_0_react_default.a.createElement("div",{style:{background:"#fff"}},["Winter","Spring","Summer","Fall"].map((function(season,i){return _react_16_11_0_react_default.a.createElement("div",{key:i,style:{width:"100%",padding:"12px",textAlign:"center",verticalAlign:"baseline",cursor:"pointer",height:"40px"},onClick:function onClick(_){return function filterBySeason(season){view.whenLayerView(layer).then((function(floodLayerView){floodLayerView.filter={where:"Season = '"+season+"'"}}))}(season)}},season)}))))))},featureLayer_stories_BasicQueryingStory=function(_Component){function BasicQueryingStory(){var _ref,_temp,_this;featureLayer_stories_classCallCheck(this,BasicQueryingStory);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _temp=_this=featureLayer_stories_possibleConstructorReturn(this,(_ref=BasicQueryingStory.__proto__||Object.getPrototypeOf(BasicQueryingStory)).call.apply(_ref,[this].concat(args))),_this.state={queryType:"basic",pointGraphic:{attributes:{key:"1"},symbol:{type:"simple-marker",color:[0,0,139],outline:{color:[255,255,255],width:1.5}}}},_this.map=null,_this.view=null,_this.featureLayer=null,_this.onMapLoad=function(map,view){_this.map=map,_this.view=view,view.on("click",_this.onClick)},_this.onFeatureLayerLoad=function(featureLayer){_this.view.extent=featureLayer.fullExtent,featureLayer.popupTemplate=featureLayer.createPopupTemplate(),_this.featureLayer=featureLayer},_this.onChange=function(e){_this.setState({queryType:e.target.value})},_this.onClick=function(screenPoint){var _this$state=_this.state,queryType=_this$state.queryType,pointGraphic=_this$state.pointGraphic,view=_this.view,point=view.toMap(screenPoint),_basic$distance$query={basic:{distance:null,units:null},distance:{distance:.5,units:"miles"}}[queryType],distance=_basic$distance$query.distance,units=_basic$distance$query.units;_this.featureLayer.queryFeatures({geometry:point,distance:distance,units:units,spatialRelationship:"intersects",returnGeometry:!1,outFields:["*"]}).then((function(featureSet){_this.setState({pointGraphic:_extends({},pointGraphic,{geometry:point})}),view.popup.open({location:point,features:featureSet.features,featureMenuOpen:!0})}))},featureLayer_stories_possibleConstructorReturn(_this,_temp)}return featureLayer_stories_inherits(BasicQueryingStory,_Component),featureLayer_stories_createClass(BasicQueryingStory,[{key:"render",value:function render(){var _state=this.state,queryType=_state.queryType,pointGraphic=_state.pointGraphic;return _react_16_11_0_react_default.a.createElement("div",{style:{width:"100vw",height:"100vh"}},_react_16_11_0_react_default.a.createElement(Map.a,{mapProperties:{basemap:"gray"},viewProperties:{popup:{autoOpenEnabled:!1,dockEnabled:!0,dockOptions:{buttonEnabled:!1,breakpoint:!1,position:"bottom-right"}}},onLoad:this.onMapLoad},_react_16_11_0_react_default.a.createElement(feature_layer_FeatureLayer,{properties:{portalItem:{id:"234d2e3f6f554e0e84757662469c26d3"},outFields:["*"]},onLoad:this.onFeatureLayerLoad}),_react_16_11_0_react_default.a.createElement(GraphicsLayer.a,null,_react_16_11_0_react_default.a.createElement(Graphic.a,{properties:pointGraphic})),_react_16_11_0_react_default.a.createElement(legend_Legend,{position:"bottom-left"}),_react_16_11_0_react_default.a.createElement(widget_Widget,{position:"top-right"},_react_16_11_0_react_default.a.createElement("div",{className:"esri-widget",style:{backgroundColor:"white",color:"black",padding:"6px",maxWidth:"400px"}},_react_16_11_0_react_default.a.createElement("p",null,"Select a query type and click a point on the map to view the results."),_react_16_11_0_react_default.a.createElement("select",{className:"esri-widget",onChange:this.onChange,value:queryType},_react_16_11_0_react_default.a.createElement("option",{value:"basic"},"Basic Query"),_react_16_11_0_react_default.a.createElement("option",{value:"distance"},"Query By Distance"))))))}}]),BasicQueryingStory}(_react_16_11_0_react.Component),featureLayer_stories_basicQuerying=function basicQuerying(){return _react_16_11_0_react_default.a.createElement(featureLayer_stories_BasicQueryingStory,null)},featureLayer_stories_CreatedFromAShapefileStory=function(_Component2){function CreatedFromAShapefileStory(){var _ref2,_temp2,_this3;featureLayer_stories_classCallCheck(this,CreatedFromAShapefileStory);for(var _len2=arguments.length,args=Array(_len2),_key2=0;_key2<_len2;_key2++)args[_key2]=arguments[_key2];return _temp2=_this3=featureLayer_stories_possibleConstructorReturn(this,(_ref2=CreatedFromAShapefileStory.__proto__||Object.getPrototypeOf(CreatedFromAShapefileStory)).call.apply(_ref2,[this].concat(args))),_this3.state={uploadStatus:"",featureLayers:[]},_this3.view=null,_this3.onFormChange=function(){var fileName=event.target.value.toLowerCase();-1!==fileName.indexOf(".zip")?_this3.generateFeatureCollection(fileName):_this3.setState({uploadStatus:"Add shapefile as .zip file"})},featureLayer_stories_possibleConstructorReturn(_this3,_temp2)}return featureLayer_stories_inherits(CreatedFromAShapefileStory,_Component2),featureLayer_stories_createClass(CreatedFromAShapefileStory,[{key:"generateFeatureCollection",value:function generateFeatureCollection(fileName){var _this4=this,name=fileName.split(".");name=name[0].replace("c:\\fakepath\\",""),this.setState({uploadStatus:"Loading"});var params={name:name,targetSR:this.view.spatialReference,maxRecordCount:1e3,enforceInputFileSizeLimit:!0,enforceOutputJsonSizeLimit:!0,generalize:!0,maxAllowableOffset:10,reducePrecision:!0,numberOfDigitsAfterDecimal:0},myContent={filetype:"shapefile",publishParameters:JSON.stringify(params),f:"json"};Object(es5.loadModules)("esri/request").then((function(request){request("https://www.arcgis.com/sharing/rest/content/features/generate",{query:myContent,body:_this4.form,responseType:"json"}).then((function(response){var layerName=response.data.featureCollection.layers[0].layerDefinition.name;_this4.setState({uploadStatus:"Loaded: "+layerName}),_this4.addShapefileToMap(response.data.featureCollection)})).catch((function(error){_this4.setState({uploadStatus:error.message})}))}))}},{key:"addShapefileToMap",value:function addShapefileToMap(featureCollection){var _this5=this;Object(es5.loadModules)(["esri/layers/support/Field","esri/Graphic"]).then((function(_ref3){var Field=_ref3.Field,Graphic=_ref3.Graphic,sourceGraphics=[],featureLayers=featureCollection.layers.map((function(layer){return{properties:{objectIdField:"FID",source:[],geometryType:"polyline",fields:layer.layerDefinition.fields.map((function(field){return Field.fromJSON(field)}))},graphics:layer.featureSet.features.map((function(f){return sourceGraphics.push(Graphic.fromJSON(f)),f}))}}));_this5.setState({uploadStatus:"",featureLayers:featureLayers}),_this5.view.goTo(sourceGraphics)}))}},{key:"render",value:function render(){var _this6=this,_state2=this.state,uploadStatus=_state2.uploadStatus,featureLayers=_state2.featureLayers;return _react_16_11_0_react_default.a.createElement("div",{style:{width:"100vw",height:"100vh"}},_react_16_11_0_react_default.a.createElement(Map.a,{mapProperties:{basemap:"dark-gray"},viewProperties:{center:[-41.647,36.41],zoom:3,popup:{defaultPopupTemplateEnabled:!0}},onLoad:function onLoad(m,v){return _this6.view=v}},featureLayers.map((function(layer,i){return _react_16_11_0_react_default.a.createElement(feature_layer_FeatureLayer,{key:i,properties:layer.properties},layer.graphics.map((function(g,i){return _react_16_11_0_react_default.a.createElement(Graphic.a,{key:i,json:g})})))})),_react_16_11_0_react_default.a.createElement(Expand.a,{properties:{expandIconClass:"esri-icon-upload"},position:"top-right"},_react_16_11_0_react_default.a.createElement("div",{style:{padding:"0.5em",background:"#fff"}},_react_16_11_0_react_default.a.createElement("div",null,_react_16_11_0_react_default.a.createElement("div",{style:{paddingLeft:"4px"}},_react_16_11_0_react_default.a.createElement("p",null,"Download shapefile from ",_react_16_11_0_react_default.a.createElement("a",{href:"https://bsvensson.github.io/various-tests/shp/drp_county_boundary.zip"},"here.")," "),_react_16_11_0_react_default.a.createElement("p",null,"Add a zipped shapefile to the map."),_react_16_11_0_react_default.a.createElement("p",null,"Visit the ",_react_16_11_0_react_default.a.createElement("a",{target:"_blank",href:"https://doc.arcgis.com/en/arcgis-online/reference/shapefiles.htm"},"Shapefiles")," help topic for information and limitations."),_react_16_11_0_react_default.a.createElement("form",{enctype:"multipart/form-data",method:"post",onChange:this.onFormChange,ref:function ref(c){return _this6.form=c}},_react_16_11_0_react_default.a.createElement("div",{className:"field"},_react_16_11_0_react_default.a.createElement("label",{className:"file-upload"},_react_16_11_0_react_default.a.createElement("span",null,_react_16_11_0_react_default.a.createElement("strong",null,"Add File")),_react_16_11_0_react_default.a.createElement("input",{type:"file",name:"file",id:"inFile"})))),_react_16_11_0_react_default.a.createElement("span",{className:"file-upload-status",style:{opacity:1}},uploadStatus),_react_16_11_0_react_default.a.createElement("div",{id:"fileInfo"})))))))}}]),CreatedFromAShapefileStory}(_react_16_11_0_react.Component),featureLayer_stories_createdFromAShapefile=function createdFromAShapefile(){return _react_16_11_0_react_default.a.createElement(featureLayer_stories_CreatedFromAShapefileStory,null)};featureLayer_stories_introFeatureLayer.__docgenInfo={description:"",methods:[],displayName:"introFeatureLayer"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src\\components\\layers\\feature-layer\\featureLayer.stories.js"]={name:"introFeatureLayer",docgenInfo:featureLayer_stories_introFeatureLayer.__docgenInfo,path:"src\\components\\layers\\feature-layer\\featureLayer.stories.js"}),featureLayer_stories_createAFeatureLayerWithClientSideGraphics.__docgenInfo={description:"",methods:[],displayName:"createAFeatureLayerWithClientSideGraphics"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src\\components\\layers\\feature-layer\\featureLayer.stories.js"]={name:"createAFeatureLayerWithClientSideGraphics",docgenInfo:featureLayer_stories_createAFeatureLayerWithClientSideGraphics.__docgenInfo,path:"src\\components\\layers\\feature-layer\\featureLayer.stories.js"}),featureLayer_stories_highlightPointFeatures.__docgenInfo={description:"",methods:[],displayName:"highlightPointFeatures"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src\\components\\layers\\feature-layer\\featureLayer.stories.js"]={name:"highlightPointFeatures",docgenInfo:featureLayer_stories_highlightPointFeatures.__docgenInfo,path:"src\\components\\layers\\feature-layer\\featureLayer.stories.js"}),featureLayer_stories_labelFeaturesUsingArcadeExpressions.__docgenInfo={description:"",methods:[],displayName:"labelFeaturesUsingArcadeExpressions"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src\\components\\layers\\feature-layer\\featureLayer.stories.js"]={name:"labelFeaturesUsingArcadeExpressions",docgenInfo:featureLayer_stories_labelFeaturesUsingArcadeExpressions.__docgenInfo,path:"src\\components\\layers\\feature-layer\\featureLayer.stories.js"}),featureLayer_stories_addLabelsToAFeatureLayer.__docgenInfo={description:"",methods:[],displayName:"addLabelsToAFeatureLayer"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src\\components\\layers\\feature-layer\\featureLayer.stories.js"]={name:"addLabelsToAFeatureLayer",docgenInfo:featureLayer_stories_addLabelsToAFeatureLayer.__docgenInfo,path:"src\\components\\layers\\feature-layer\\featureLayer.stories.js"}),featureLayer_stories_multilineLabels.__docgenInfo={description:"",methods:[],displayName:"multilineLabels"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src\\components\\layers\\feature-layer\\featureLayer.stories.js"]={name:"multilineLabels",docgenInfo:featureLayer_stories_multilineLabels.__docgenInfo,path:"src\\components\\layers\\feature-layer\\featureLayer.stories.js"}),featureLayer_stories_addMultipleLabelClassesToALayer.__docgenInfo={description:"",methods:[],displayName:"addMultipleLabelClassesToALayer"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src\\components\\layers\\feature-layer\\featureLayer.stories.js"]={name:"addMultipleLabelClassesToALayer",docgenInfo:featureLayer_stories_addMultipleLabelClassesToALayer.__docgenInfo,path:"src\\components\\layers\\feature-layer\\featureLayer.stories.js"}),featureLayer_stories_filterFeaturesByAttributes.__docgenInfo={description:"",methods:[],displayName:"filterFeaturesByAttributes"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src\\components\\layers\\feature-layer\\featureLayer.stories.js"]={name:"filterFeaturesByAttributes",docgenInfo:featureLayer_stories_filterFeaturesByAttributes.__docgenInfo,path:"src\\components\\layers\\feature-layer\\featureLayer.stories.js"}),featureLayer_stories_basicQuerying.__docgenInfo={description:"",methods:[],displayName:"basicQuerying"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src\\components\\layers\\feature-layer\\featureLayer.stories.js"]={name:"basicQuerying",docgenInfo:featureLayer_stories_basicQuerying.__docgenInfo,path:"src\\components\\layers\\feature-layer\\featureLayer.stories.js"}),featureLayer_stories_createdFromAShapefile.__docgenInfo={description:"",methods:[],displayName:"createdFromAShapefile"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src\\components\\layers\\feature-layer\\featureLayer.stories.js"]={name:"createdFromAShapefile",docgenInfo:featureLayer_stories_createdFromAShapefile.__docgenInfo,path:"src\\components\\layers\\feature-layer\\featureLayer.stories.js"})},568:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _react_16_11_0_react=__webpack_require__(0),_react_16_11_0_react_default=__webpack_require__.n(_react_16_11_0_react),Map=__webpack_require__(46),GraphicsLayer=__webpack_require__(55),Graphic=__webpack_require__(17),_prop_types_15_7_2_prop_types=__webpack_require__(1),_prop_types_15_7_2_prop_types_default=__webpack_require__.n(_prop_types_15_7_2_prop_types),es5=__webpack_require__(14),ModulesContext=_react_16_11_0_react_default.a.createContext({status:"",modules:{}}),ModulesProvider_ModulesProvider=ModulesContext.Provider,ModulesConsumer=ModulesContext.Consumer,_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}var ModuleLoader_ModuleLoader=function(_Component){function ModuleLoader(){var _ref,_temp,_this;!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,ModuleLoader);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _temp=_this=_possibleConstructorReturn(this,(_ref=ModuleLoader.__proto__||Object.getPrototypeOf(ModuleLoader)).call.apply(_ref,[this].concat(args))),_this.state={status:"loading",modules:null},_possibleConstructorReturn(_this,_temp)}return function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(ModuleLoader,_Component),_createClass(ModuleLoader,[{key:"componentDidMount",value:function componentDidMount(){var _this2=this;Object(es5.loadModules)(this.props.modules).then((function(modules){_this2.setState({modules:modules,status:"success"})})).catch((function(_){_this2.setState({modules:null,status:"error"})}))}},{key:"render",value:function render(){var children=this.props.children;return _react_16_11_0_react_default.a.createElement(ModulesProvider_ModulesProvider,{value:this.state},children)}}]),ModuleLoader}(_react_16_11_0_react.Component);ModuleLoader_ModuleLoader.propTypes={modules:_prop_types_15_7_2_prop_types_default.a.array},ModuleLoader_ModuleLoader.__docgenInfo={description:"",methods:[],displayName:"ModuleLoader",props:{modules:{type:{name:"array"},required:!1,description:""}}};var components_ModuleLoader=ModuleLoader_ModuleLoader;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src\\components\\ModuleLoader.js"]={name:"ModuleLoader",docgenInfo:ModuleLoader_ModuleLoader.__docgenInfo,path:"src\\components\\ModuleLoader.js"});var simplePointGraphic={geometry:{type:"point",longitude:-49.97,latitude:41.73},symbol:{type:"simple-marker",color:[226,119,40],outline:{color:[255,255,255],width:2}},attributes:{key:"00"}},simplePolylineGraphic={geometry:{type:"polyline",paths:[[-111.3,52.68],[-98,49.5],[-93.94,29.89]]},symbol:{type:"simple-line",color:[226,119,40],width:4},attributes:{key:"01",Name:"Keystone Pipeline",Owner:"TransCanada",Length:"3,456 km"},popupTemplate:{title:"{Name}",content:[{type:"fields",fieldInfos:[{fieldName:"Name"},{fieldName:"Owner"},{fieldName:"Length"}]}]}},simplePolygonGraphic={geometry:{type:"polygon",rings:[[-64.78,32.3],[-66.07,18.45],[-80.21,25.78],[-64.78,32.3]]},symbol:{type:"simple-fill",color:[227,139,79,.8],outline:{color:[255,255,255],width:1}},attributes:{key:"02"}},esm=__webpack_require__(11);__webpack_require__.d(__webpack_exports__,"introGraphic",(function(){return graphic_stories_introGraphic})),__webpack_require__.d(__webpack_exports__,"addGraphicsToASceneView",(function(){return graphic_stories_addGraphicsToASceneView})),__webpack_require__.d(__webpack_exports__,"workingWith3dMeshPrimitives",(function(){return graphic_stories_workingWith3dMeshPrimitives})),__webpack_require__.d(__webpack_exports__,"lowPolyTerrainUsingMeshGeometry",(function(){return graphic_stories_lowPolyTerrainUsingMeshGeometry}));var graphic_stories_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}return Array.from(arr)}function graphic_stories_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function graphic_stories_possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function graphic_stories_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}__webpack_exports__.default={title:"Graphic"};var graphic_stories_introGraphic=function introGraphic(){var graphics=[simplePointGraphic,simplePolylineGraphic,simplePolygonGraphic];return _react_16_11_0_react_default.a.createElement("div",{style:{width:"100vw",height:"100vh"}},_react_16_11_0_react_default.a.createElement(Map.a,{mapProperties:{basemap:"hybrid"},viewProperties:{center:[-80,35],zoom:3}},_react_16_11_0_react_default.a.createElement(GraphicsLayer.a,null,graphics.map((function(g){return _react_16_11_0_react_default.a.createElement(Graphic.a,{properties:g})})))))},graphic_stories_addGraphicsToASceneView=function addGraphicsToASceneView(){var graphics=[{geometry:{type:"point",x:-.178,y:51.48791,z:1010},symbol:{type:"simple-marker",color:[226,119,40],outline:{color:[255,255,255],width:2}}},{geometry:{type:"polyline",paths:[[-.178,51.48791,0],[-.178,51.48791,1e3]]},symbol:{type:"simple-line",color:[226,119,40],width:4}},{geometry:{type:"polygon",rings:[[-.184,51.48391,400],[-.184,51.49091,500],[-.172,51.49091,500],[-.172,51.48391,400],[-.184,51.48391,400]]},symbol:{type:"simple-fill",color:[227,139,79,.8],outline:{color:[255,255,255],width:1}}}];return _react_16_11_0_react_default.a.createElement("div",{style:{width:"100vw",height:"100vh"}},_react_16_11_0_react_default.a.createElement(esm.b,{mapProperties:{basemap:"hybrid"},viewProperties:{camera:{position:{x:-.17746710975334712,y:51.44543992422466,z:1266.7049653716385},heading:.34445102566290225,tilt:82.95536300536367}}},_react_16_11_0_react_default.a.createElement(GraphicsLayer.a,null,[graphics.map((function(g,i){return _react_16_11_0_react_default.a.createElement(Graphic.a,{key:i,properties:g})}))])))},graphic_stories_WorkingWith3dMeshPrimitivesStory=function(_Component){function WorkingWith3dMeshPrimitivesStory(){var _ref,_temp,_this;graphic_stories_classCallCheck(this,WorkingWith3dMeshPrimitivesStory);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _temp=_this=graphic_stories_possibleConstructorReturn(this,(_ref=WorkingWith3dMeshPrimitivesStory.__proto__||Object.getPrototypeOf(WorkingWith3dMeshPrimitivesStory)).call.apply(_ref,[this].concat(args))),_this.state={graphics:[]},_this.createPyramid=function(pt,params){var Mesh=_this.props.modules.Mesh,height=params.size.height,halfWidth=params.size.width/2,halfDepth=params.size.depth/2;return new Mesh({vertexAttributes:{position:[pt.x,pt.y,pt.z+height,pt.x-halfWidth,pt.y-halfDepth,pt.z,pt.x+halfWidth,pt.y-halfDepth,pt.z,pt.x+halfWidth,pt.y+halfDepth,pt.z,pt.x-halfWidth,pt.y+halfDepth,pt.z],uv:[.5,0,0,1,1,1,0,1,1,1]},components:[{faces:[0,1,2],material:params.material},{faces:[0,2,3],material:params.material},{faces:[0,3,4],material:params.material},{faces:[0,4,1],material:params.material}],spatialReference:pt.spatialReference})},_this.createLeafCanvas=function(){var canvas=document.createElement("canvas");canvas.width=32,canvas.height=32;var ctx=canvas.getContext("2d"),gradient=ctx.createLinearGradient(0,0,0,32);return gradient.addColorStop(0,"#00ff00"),gradient.addColorStop(1,"#009900"),ctx.fillStyle=gradient,ctx.fillRect(0,0,32,32),canvas},_this.createTreeGeometry=function(pt){var _this$props$modules=_this.props.modules,Mesh=_this$props$modules.Mesh,meshUtils=_this$props$modules.meshUtils,treeMaterial={colorTexture:_this.createLeafCanvas()},bottom=_this.createPyramid(pt,{size:{width:10,depth:10,height:5},material:treeMaterial}),middle=_this.createPyramid(pt,{size:{width:8,depth:8,height:3},material:treeMaterial}),top=_this.createPyramid(pt,{size:{width:6,depth:6,height:3},material:treeMaterial}),trunk=Mesh.createBox(pt,{size:{width:1,depth:1,height:5},material:{color:"orange"}});return bottom.offset(0,0,4),middle.offset(0,0,7),top.offset(0,0,9),meshUtils.merge([trunk,bottom,middle,top])},_this.createSnowManGeometry=function(pt){for(var _this$props$modules2=_this.props.modules,Mesh=_this$props$modules2.Mesh,meshUtils=_this$props$modules2.meshUtils,whiteMaterial={color:"white"},blackMaterial={color:"black"},lowerBody=Mesh.createSphere(pt,{size:5,material:whiteMaterial}),upperBody=Mesh.createSphere(pt,{size:4,material:whiteMaterial}),head=Mesh.createSphere(pt,{size:3,material:whiteMaterial}),rightEye=Mesh.createSphere(pt,{size:.6,material:blackMaterial}),leftEye=Mesh.createSphere(pt,{size:.6,material:blackMaterial}),nose=Mesh.createCylinder(pt,{size:{width:.8,depth:.8,height:3},material:{color:"orange"}}),nosePosition=nose.vertexAttributes.position,i=0;i<nosePosition.length/2;i+=3)nosePosition[i+0]=pt.x,nosePosition[i+1]=pt.y;return nose.vertexAttributes.normal=null,nose.vertexAttributesChanged(),upperBody.offset(0,0,4.5),head.offset(0,0,8),rightEye.offset(0,1.3,9.6).rotate(0,0,-240,{origin:pt}),leftEye.offset(0,1.3,9.6).rotate(0,0,-190,{origin:pt}),nose.rotate(-90,0,-90).offset(2,0,8).rotate(0,0,-125,{origin:pt}),meshUtils.merge([lowerBody,upperBody,head,rightEye,leftEye,nose])},graphic_stories_possibleConstructorReturn(_this,_temp)}return graphic_stories_inherits(WorkingWith3dMeshPrimitivesStory,_Component),graphic_stories_createClass(WorkingWith3dMeshPrimitivesStory,[{key:"componentDidMount",value:function componentDidMount(){var _props$modules=this.props.modules,Point=_props$modules.Point,SpatialReference=_props$modules.SpatialReference,snowManLocation=new Point({x:870934.67356809,y:5835285.101616,z:2013.6,spatialReference:SpatialReference.WebMercator}),symbol={type:"mesh-3d",symbolLayers:[{type:"fill"}]},treeLocations=[new Point({x:870948.1109645499,y:5835340.97953185,z:2022.1,spatialReference:SpatialReference.WebMercator}),new Point({x:870917.1665520248,y:5835321.648520845,z:2027.02,spatialReference:SpatialReference.WebMercator}),new Point({x:871003.3214365735,y:5835349.059825734,z:2011.96,spatialReference:SpatialReference.WebMercator}),new Point({x:870965.2794487729,y:5835289.441932107,z:2005.77,spatialReference:SpatialReference.WebMercator})],graphics=[];graphics.push({geometry:this.createSnowManGeometry(snowManLocation),symbol:symbol});for(var i=0;i<treeLocations.length;i++)graphics.push({geometry:this.createTreeGeometry(treeLocations[i]),symbol:symbol});this.setState({graphics:graphics})}},{key:"render",value:function render(){var graphics=this.state.graphics;return _react_16_11_0_react_default.a.createElement("div",{style:{width:"100vw",height:"100vh"}},_react_16_11_0_react_default.a.createElement(esm.b,{mapProperties:{basemap:"satellite",ground:"world-elevation"},viewProperties:{environment:{atmosphere:{quality:"high"},lighting:{directShadowsEnabled:!0,ambientOcclusionEnabled:!0}},camera:{position:[7.8233347,46.3409284,2032.93599],heading:19.72,tilt:86.007}}},_react_16_11_0_react_default.a.createElement(GraphicsLayer.a,null,[graphics.map((function(g,i){return _react_16_11_0_react_default.a.createElement(Graphic.a,{key:i,properties:g})}))])))}}]),WorkingWith3dMeshPrimitivesStory}(_react_16_11_0_react.Component),graphic_stories_workingWith3dMeshPrimitives=function workingWith3dMeshPrimitives(){return _react_16_11_0_react_default.a.createElement(components_ModuleLoader,{modules:["esri/geometry/Point","esri/geometry/SpatialReference","esri/geometry/Mesh","esri/geometry/support/meshUtils"]},_react_16_11_0_react_default.a.createElement(ModulesConsumer,null,(function(_ref2){var status=_ref2.status,modules=_ref2.modules;return"success"===status?_react_16_11_0_react_default.a.createElement(graphic_stories_WorkingWith3dMeshPrimitivesStory,{modules:modules}):null})))},graphic_stories_LowPolyTerrainUsingMeshGeometryStory=function(_Component2){function LowPolyTerrainUsingMeshGeometryStory(){var _ref3,_temp2,_this2;graphic_stories_classCallCheck(this,LowPolyTerrainUsingMeshGeometryStory);for(var _len2=arguments.length,args=Array(_len2),_key2=0;_key2<_len2;_key2++)args[_key2]=arguments[_key2];return _temp2=_this2=graphic_stories_possibleConstructorReturn(this,(_ref3=LowPolyTerrainUsingMeshGeometryStory.__proto__||Object.getPrototypeOf(LowPolyTerrainUsingMeshGeometryStory)).call.apply(_ref3,[this].concat(args))),_this2.state={graphics:[]},_this2.map=null,_this2.view=null,_this2.createTerrain=function(){var _this3=_this2,map=_this3.map,view=_this3.view,extent=view.clippingArea,getColor=function getColor(height){return height<1e3?[149,195,50]:height<1400?[209,148,81]:[255,255,255]},createTerrainTexture=function createTerrainTexture(mesh){var vPositions=mesh.vertexAttributes.position,vertexCount=vPositions.length/3,w=Math.round(Math.sqrt(vertexCount*extent.width/extent.height)),h=Math.round(vertexCount/w),canvas=document.createElement("canvas"),ctx=canvas.getContext("2d");canvas.width=w,canvas.height=h;for(var imgData=ctx.createImageData(w,h),j=0,i=0;i<vPositions.length;i+=3){var color=getColor(vPositions[i+2]);imgData.data[j+0]=color[0],imgData.data[j+1]=color[1],imgData.data[j+2]=color[2],imgData.data[j+3]=255,j+=4}return ctx.putImageData(imgData,0,0),canvas};return _this2.props.modules.meshUtils.createFromElevation(map.ground.layers.getItemAt(0),extent,{demResolution:125}).then((function(mesh){for(var vPositions=mesh.vertexAttributes.position,index=0;index<vPositions.length;index+=3)vPositions[index+2]=2*vPositions[index+2];return mesh.components[0].shading="flat",mesh.components[0].material={colorTexture:createTerrainTexture(mesh)},_this2.setState({graphics:[].concat(_toConsumableArray(_this2.state.graphics),[{geometry:mesh,symbol:{type:"mesh-3d",symbolLayers:[{type:"fill"}]}}])}),mesh}))},_this2.createTrees=function(mesh){var _this2$props$modules=_this2.props.modules,Point=_this2$props$modules.Point,meshUtils=_this2$props$modules.meshUtils,extent=_this2.view.clippingArea,treeXYCoordinates=[[949511.0269866717,5996737.260347401],[948349.0915666509,5995392.784148848],[948134.9365087302,5995257.3964663735],[947677.0638892008,5995549.099657962],[948533.132906933,5996579.031805388],[948164.69040468,5998378.064842778],[947679.8323087967,5996458.904069111],[949905.6697365673,5995740.200877652],[949291.5109791199,5997380.737017862],[948419.5816452013,5994747.508043459],[949421.7202507699,5998165.359250989]];return meshUtils.createElevationSampler(mesh).then((function(elevationSampler){for(var i=0;i<treeXYCoordinates.length;i++){var tree=new Point({x:treeXYCoordinates[i][0],y:treeXYCoordinates[i][1],spatialReference:extent.spatialReference}),tree3D=elevationSampler.queryElevation(tree),symbol={type:"point-3d",symbolLayers:[{type:"object",resource:{href:"https://jsapi.maps.arcgis.com/sharing/rest/content/items/4418035fa87d44f490d5bf27a579e118/resources/styles/web/resource/tree.json"},height:200,heading:360*Math.random(),anchor:"bottom"}]};_this2.setState({graphics:[].concat(_toConsumableArray(_this2.state.graphics),[{geometry:tree3D,symbol:symbol}])})}}))},_this2.onSceneLoad=function(map,view){_this2.map=map,_this2.view=view,view.when().then(_this2.createTerrain).then(_this2.createTrees).catch(console.error)},graphic_stories_possibleConstructorReturn(_this2,_temp2)}return graphic_stories_inherits(LowPolyTerrainUsingMeshGeometryStory,_Component2),graphic_stories_createClass(LowPolyTerrainUsingMeshGeometryStory,[{key:"render",value:function render(){window.x=this;var _props$modules2=this.props.modules,Extent=_props$modules2.Extent,SpatialReference=_props$modules2.SpatialReference,graphics=this.state.graphics;return _react_16_11_0_react_default.a.createElement("div",{style:{width:"100vw",height:"100vh"}},_react_16_11_0_react_default.a.createElement(esm.b,{mapProperties:{ground:"world-elevation"},viewProperties:{viewingMode:"local",environment:{lighting:{directShadowsEnabled:!0}},clippingArea:new Extent({xmax:950005,xmin:943783,ymax:5998448,ymin:5994465,spatialReference:SpatialReference.WebMercator}),camera:{position:{spatialReference:SpatialReference.WebMercator,x:949489,y:5994263,z:1339},heading:322,tilt:82}},onLoad:this.onSceneLoad},_react_16_11_0_react_default.a.createElement(GraphicsLayer.a,null,[graphics.map((function(g,i){return _react_16_11_0_react_default.a.createElement(Graphic.a,{key:i,properties:g})}))])))}}]),LowPolyTerrainUsingMeshGeometryStory}(_react_16_11_0_react.Component),graphic_stories_lowPolyTerrainUsingMeshGeometry=function lowPolyTerrainUsingMeshGeometry(){return _react_16_11_0_react_default.a.createElement(components_ModuleLoader,{modules:["esri/geometry/Point","esri/geometry/Extent","esri/geometry/SpatialReference","esri/geometry/Mesh","esri/geometry/support/meshUtils"]},_react_16_11_0_react_default.a.createElement(ModulesConsumer,null,(function(_ref4){var status=_ref4.status,modules=_ref4.modules;return"success"===status?_react_16_11_0_react_default.a.createElement(graphic_stories_LowPolyTerrainUsingMeshGeometryStory,{modules:modules}):null})))};graphic_stories_introGraphic.__docgenInfo={description:"",methods:[],displayName:"introGraphic"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src\\components\\graphic\\graphic.stories.js"]={name:"introGraphic",docgenInfo:graphic_stories_introGraphic.__docgenInfo,path:"src\\components\\graphic\\graphic.stories.js"}),graphic_stories_addGraphicsToASceneView.__docgenInfo={description:"",methods:[],displayName:"addGraphicsToASceneView"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src\\components\\graphic\\graphic.stories.js"]={name:"addGraphicsToASceneView",docgenInfo:graphic_stories_addGraphicsToASceneView.__docgenInfo,path:"src\\components\\graphic\\graphic.stories.js"}),graphic_stories_workingWith3dMeshPrimitives.__docgenInfo={description:"",methods:[],displayName:"workingWith3dMeshPrimitives"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src\\components\\graphic\\graphic.stories.js"]={name:"workingWith3dMeshPrimitives",docgenInfo:graphic_stories_workingWith3dMeshPrimitives.__docgenInfo,path:"src\\components\\graphic\\graphic.stories.js"}),graphic_stories_lowPolyTerrainUsingMeshGeometry.__docgenInfo={description:"",methods:[],displayName:"lowPolyTerrainUsingMeshGeometry"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src\\components\\graphic\\graphic.stories.js"]={name:"lowPolyTerrainUsingMeshGeometry",docgenInfo:graphic_stories_lowPolyTerrainUsingMeshGeometry.__docgenInfo,path:"src\\components\\graphic\\graphic.stories.js"})},569:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _react_16_11_0_react=__webpack_require__(0),_react_16_11_0_react_default=__webpack_require__.n(_react_16_11_0_react),esm=__webpack_require__(11),_prop_types_15_7_2_prop_types=__webpack_require__(1),_prop_types_15_7_2_prop_types_default=__webpack_require__.n(_prop_types_15_7_2_prop_types),hoc=__webpack_require__(20),BasemapGallery=Object(hoc.a)("esri/widgets/BasemapGallery");BasemapGallery.propTypes={properties:_prop_types_15_7_2_prop_types_default.a.object,position:_prop_types_15_7_2_prop_types_default.a.oneOfType([_prop_types_15_7_2_prop_types_default.a.string,_prop_types_15_7_2_prop_types_default.a.object])};var basemap_gallery_BasemapGallery=BasemapGallery,Bookmarks=__webpack_require__(118),LayerList=Object(hoc.a)("esri/widgets/LayerList");LayerList.propTypes={properties:_prop_types_15_7_2_prop_types_default.a.object,position:_prop_types_15_7_2_prop_types_default.a.oneOfType([_prop_types_15_7_2_prop_types_default.a.string,_prop_types_15_7_2_prop_types_default.a.object])};var layer_list_LayerList=LayerList,Expand=__webpack_require__(63),Locate=Object(hoc.a)("esri/widgets/Locate");Locate.propTypes={properties:_prop_types_15_7_2_prop_types_default.a.object,position:_prop_types_15_7_2_prop_types_default.a.oneOfType([_prop_types_15_7_2_prop_types_default.a.string,_prop_types_15_7_2_prop_types_default.a.object])};var locate_Locate=Locate;__webpack_require__.d(__webpack_exports__,"basemapGallery",(function(){return widget_stories_basemapGallery})),__webpack_require__.d(__webpack_exports__,"layerList",(function(){return widget_stories_layerList})),__webpack_require__.d(__webpack_exports__,"bookmarks",(function(){return widget_stories_bookmarks})),__webpack_require__.d(__webpack_exports__,"locale",(function(){return widget_stories_locale})),__webpack_require__.d(__webpack_exports__,"expand",(function(){return widget_stories_expand}));__webpack_exports__.default={title:"Widget"};var widget_stories_basemapGallery=function basemapGallery(){return _react_16_11_0_react_default.a.createElement("div",{style:{width:"100vw",height:"100vh"}},_react_16_11_0_react_default.a.createElement(esm.a,{mapProperties:{basemap:"gray"},viewProperties:{center:[139.68,35.68],zoom:3}},_react_16_11_0_react_default.a.createElement(basemap_gallery_BasemapGallery,{position:"top-right"})))},widget_stories_layerList=function layerList(){return _react_16_11_0_react_default.a.createElement("div",{style:{width:"100vw",height:"100vh"}},_react_16_11_0_react_default.a.createElement(esm.d,{id:"adfad6ee6c6043238ea64e121bb6429a"},_react_16_11_0_react_default.a.createElement(layer_list_LayerList,{position:"top-right"})))},widget_stories_bookmarks=function bookmarks(){return _react_16_11_0_react_default.a.createElement("div",{style:{width:"100vw",height:"100vh"}},_react_16_11_0_react_default.a.createElement(esm.c,{id:"aa1d3f80270146208328cf66d022e09c"},_react_16_11_0_react_default.a.createElement(Expand.a,{position:"top-right",properties:{expanded:!0},widgetContent:!0},_react_16_11_0_react_default.a.createElement(Bookmarks.a,{properties:{editingEnabled:!0}}))))},widget_stories_locale=function locale(){return _react_16_11_0_react_default.a.createElement("div",{style:{width:"100vw",height:"100vh"}},_react_16_11_0_react_default.a.createElement(esm.a,{mapProperties:{basemap:"streets"},viewProperties:{center:[-56.049,38.485,78],zoom:3}},_react_16_11_0_react_default.a.createElement(locate_Locate,{position:"top-left"})))},widget_stories_expand=function expand(){var view=void 0,expand=void 0;return _react_16_11_0_react_default.a.createElement("div",{style:{width:"100vw",height:"100vh"}},_react_16_11_0_react_default.a.createElement(esm.b,{mapProperties:{basemap:"satellite"},onLoad:function onLoad(m,v){return view=v}},_react_16_11_0_react_default.a.createElement(Expand.a,{position:"top-right",widgetContent:!0,onLoad:function onLoad(e){return expand=e}},_react_16_11_0_react_default.a.createElement(basemap_gallery_BasemapGallery,{onLoad:function onBasemapGalleryLoad(basemapGallery){basemapGallery.watch("activeBasemap",(function(){("xsmall"===view.heightBreakpoint||"xsmall"===view.widthBreakpoint)&&expand.collapse()}))}}))))};widget_stories_basemapGallery.__docgenInfo={description:"",methods:[],displayName:"basemapGallery"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src\\components\\widgets\\widget.stories.js"]={name:"basemapGallery",docgenInfo:widget_stories_basemapGallery.__docgenInfo,path:"src\\components\\widgets\\widget.stories.js"}),widget_stories_layerList.__docgenInfo={description:"",methods:[],displayName:"layerList"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src\\components\\widgets\\widget.stories.js"]={name:"layerList",docgenInfo:widget_stories_layerList.__docgenInfo,path:"src\\components\\widgets\\widget.stories.js"}),widget_stories_bookmarks.__docgenInfo={description:"",methods:[],displayName:"bookmarks"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src\\components\\widgets\\widget.stories.js"]={name:"bookmarks",docgenInfo:widget_stories_bookmarks.__docgenInfo,path:"src\\components\\widgets\\widget.stories.js"}),widget_stories_locale.__docgenInfo={description:"",methods:[],displayName:"locale"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src\\components\\widgets\\widget.stories.js"]={name:"locale",docgenInfo:widget_stories_locale.__docgenInfo,path:"src\\components\\widgets\\widget.stories.js"}),widget_stories_expand.__docgenInfo={description:"",methods:[],displayName:"expand"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src\\components\\widgets\\widget.stories.js"]={name:"expand",docgenInfo:widget_stories_expand.__docgenInfo,path:"src\\components\\widgets\\widget.stories.js"})},63:function(module,__webpack_exports__,__webpack_require__){"use strict";var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__),prop_types__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(1),prop_types__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_1__),esri_module_loader__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(14),_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}var Expand=function(_Component){function Expand(){var _ref,_temp,_this;!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Expand);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _temp=_this=_possibleConstructorReturn(this,(_ref=Expand.__proto__||Object.getPrototypeOf(Expand)).call.apply(_ref,[this].concat(args))),_this.state={widgetInstance:null,childWidgetInstance:null},_this.contentNode=null,_possibleConstructorReturn(_this,_temp)}return function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(Expand,_Component),_createClass(Expand,[{key:"componentDidMount",value:function componentDidMount(){var _this2=this;Object(esri_module_loader__WEBPACK_IMPORTED_MODULE_2__.loadModules)(["esri/widgets/Expand"]).then((function(_ref2){var Expand=_ref2.Expand,_props=_this2.props,view=_props.view,_props$properties=_props.properties,properties=void 0===_props$properties?{}:_props$properties,onExpand=_props.onExpand,onLoad=_props.onLoad,widgetContent=_props.widgetContent,widgetInstance=new Expand(_extends({},properties,{content:widgetContent?null:_this2.contentNode,view:view}));widgetInstance.watch("expanded",(function(){onExpand&&onExpand(widgetInstance.expanded)})),_this2.add(widgetInstance),_this2.setState({widgetInstance:widgetInstance}),onLoad&&onLoad(widgetInstance)}))}},{key:"componentWillUnmount",value:function componentWillUnmount(){this.state.widgetInstance&&this.remove(this.state.widgetInstance)}},{key:"componentDidUpdate",value:function componentDidUpdate(){var widgetContent=this.props.widgetContent,_state=this.state,childWidgetInstance=_state.childWidgetInstance,widgetInstance=_state.widgetInstance;widgetContent&&widgetInstance&&childWidgetInstance&&(widgetInstance.content=childWidgetInstance)}},{key:"add",value:function add(widgetInstance){var _props2=this.props,view=_props2.view,position=_props2.position;view.ui.add(widgetInstance,position)}},{key:"remove",value:function remove(widgetInstance){this.props.view.ui.remove(widgetInstance)}},{key:"render",value:function render(){var _this3=this,_props3=this.props,children=_props3.children,widgetContent=_props3.widgetContent,props=function _objectWithoutProperties(obj,keys){var target={};for(var i in obj)keys.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(obj,i)&&(target[i]=obj[i]);return target}(_props3,["children","widgetContent"]);if(widgetContent){var child=react__WEBPACK_IMPORTED_MODULE_0__.Children.only(children);return react__WEBPACK_IMPORTED_MODULE_0___default.a.cloneElement(child,{view:props.view,add:function add(){},remove:function remove(){},onLoad:function onLoad(childWidgetInstance){_this3.setState({childWidgetInstance:childWidgetInstance}),child.props.onLoad&&child.props.onLoad(childWidgetInstance)}})}return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div",{ref:function ref(c){return _this3.contentNode=c}},children)}}]),Expand}(react__WEBPACK_IMPORTED_MODULE_0__.Component);Expand.propTypes={properties:prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.object,position:prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.oneOfType([prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.string,prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.object]),onExpand:prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.func,onLoad:prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.func,widgetContent:prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.bool},Expand.__docgenInfo={description:"",methods:[{name:"add",docblock:null,modifiers:[],params:[{name:"widgetInstance",type:null}],returns:null},{name:"remove",docblock:null,modifiers:[],params:[{name:"widgetInstance",type:null}],returns:null}],displayName:"Expand",props:{properties:{type:{name:"object"},required:!1,description:""},position:{type:{name:"union",value:[{name:"string"},{name:"object"}]},required:!1,description:""},onExpand:{type:{name:"func"},required:!1,description:""},onLoad:{type:{name:"func"},required:!1,description:""},widgetContent:{type:{name:"bool"},required:!1,description:""}}},__webpack_exports__.a=Expand,"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src\\components\\widgets\\expand\\Expand.js"]={name:"Expand",docgenInfo:Expand.__docgenInfo,path:"src\\components\\widgets\\expand\\Expand.js"})}},[[263,1,2]]]);
//# sourceMappingURL=main.1eec51847f1000757ada.bundle.js.map